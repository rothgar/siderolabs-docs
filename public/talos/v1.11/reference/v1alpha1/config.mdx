---
description: Config defines the v1alpha1.Config Talos machine configuration document.
title: Config
---










```yaml
version: v1alpha1
machine: # ...
cluster: # ...
```


| Field | Type | Description | Value(s) |
|-------|------|-------------|----------|
|`version` |string |Indicates the schema used to decode the contents.  |`v1alpha1`<br /> |
|`debug` |bool |Enable verbose logging to the console.<br />All system containers logs will flow into serial console.<br /><br />**Note:** To avoid breaking Talos bootstrap flow enable this option only if serial console can handle high message throughput.  |`true`<br />`yes`<br />`false`<br />`no`<br /> |
|`machine` |<a href="#Config.machine">MachineConfig</a> |Provides machine specific configuration options.  | |
|`cluster` |<a href="#Config.cluster">ClusterConfig</a> |Provides cluster specific configuration options.  | |




## machine

MachineConfig represents the machine-specific config values.



```yaml
machine:
    type: controlplane
    # InstallConfig represents the installation options for preparing a node.
    install:
        disk: /dev/sda # The disk used for installations.
        # Allows for supplying extra kernel args via the bootloader.
        extraKernelArgs:
            - console=ttyS1
            - panic=10
        image: ghcr.io/siderolabs/installer:latest # Allows for supplying the image used to perform the installation.
        wipe: false # Indicates if the installation disk should be wiped at installation time.

        # # Look up disk using disk attributes like model, size, serial and others.
        # diskSelector:
        #     size: 4GB # Disk size.
        #     model: WDC* # Disk model `/sys/block/{"<"}dev{">"}/device/model`.
        #     busPath: /pci0000:00/0000:00:17.0/ata1/host0/target0:0:0/0:0:0:0 # Disk bus path.
```


| Field | Type | Description | Value(s) |
|-------|------|-------------|----------|
|`type` |string |Defines the role of the machine within the cluster.<br /><br />**Control Plane**<br /><br />Control Plane node type designates the node as a control plane member.<br />This means it will host etcd along with the Kubernetes controlplane components such as API Server, Controller Manager, Scheduler.<br /><br />**Worker**<br /><br />Worker node type designates the node as a worker node.<br />This means it will be an available compute node for scheduling workloads.<br /><br />This node type was previously known as "join"; that value is still supported but deprecated.  |`controlplane`<br />`worker`<br /> |
|`token` |string |The `token` is used by a machine to join the PKI of the cluster.<br />Using this token, a machine will create a certificate signing request (CSR), and request a certificate that will be used as its' identity. <Accordion title="Show example(s)">`token: 328hom.uqjzh6jnn2eie9oi`</Accordion> | |
|`ca` |PEMEncodedCertificateAndKey |The root certificate authority of the PKI.<br />It is composed of a base64 encoded `crt` and `key`. <Accordion title="Show example(s)">`ca:\n    crt: LS0tIEVYQU1QTEUgQ0VSVElGSUNBVEUgLS0t\n    key: LS0tIEVYQU1QTEUgS0VZIC0tLQ==`</Accordion> | |
|`acceptedCAs` |[]PEMEncodedCertificate |The certificates issued by certificate authorities are accepted in addition to issuing 'ca'.<br />It is composed of a base64 encoded `crt``.  | |
|`certSANs` |[]string |Extra certificate subject alternative names for the machine's certificate.<br />By default, all non-loopback interface IPs are automatically added to the certificate's SANs. <Accordion title="Show example(s)">`certSANs:\n    - 10.0.0.10\n    - 172.16.0.10\n    - 192.168.0.10`</Accordion> | |
|`controlPlane` |<a href="#Config.machine.controlPlane">MachineControlPlaneConfig</a> |Provides machine specific control plane configuration options. <Accordion title="Show example(s)">`controlPlane:\n    # Controller manager machine specific configuration options.\n    controllerManager:\n        disabled: false # Disable kube-controller-manager on the node.\n    # Scheduler machine specific configuration options.\n    scheduler:\n        disabled: true # Disable kube-scheduler on the node.`</Accordion> | |
|`kubelet` |<a href="#Config.machine.kubelet">KubeletConfig</a> |Used to provide additional options to the kubelet. <Accordion title="Show example(s)">`kubelet:\n    image: ghcr.io/siderolabs/kubelet:v1.34.1 # The `image` field is an optional reference to an alternative kubelet image.\n    # The `extraArgs` field is used to provide additional flags to the kubelet.\n    extraArgs:\n        feature-gates: ServerSideApply=true\n\n    # # The `ClusterDNS` field is an optional reference to an alternative kubelet clusterDNS ip list.\n    # clusterDNS:\n    #     - 10.96.0.10\n    #     - 169.254.2.53\n\n    # # The `extraMounts` field is used to add additional mounts to the kubelet container.\n    # extraMounts:\n    #     - destination: /var/lib/example # Destination is the absolute path where the mount will be placed in the container.\n    #       type: bind # Type specifies the mount kind.\n    #       source: /var/lib/example # Source specifies the source path of the mount.\n    #       # Options are fstab style mount options.\n    #       options:\n    #         - bind\n    #         - rshared\n    #         - rw\n\n    # # The `extraConfig` field is used to provide kubelet configuration overrides.\n    # extraConfig:\n    #     serverTLSBootstrap: true\n\n    # # The `KubeletCredentialProviderConfig` field is used to provide kubelet credential configuration.\n    # credentialProviderConfig:\n    #     apiVersion: kubelet.config.k8s.io/v1\n    #     kind: CredentialProviderConfig\n    #     providers:\n    #         - apiVersion: credentialprovider.kubelet.k8s.io/v1\n    #           defaultCacheDuration: 12h\n    #           matchImages:\n    #             - '*.dkr.ecr.*.amazonaws.com'\n    #             - '*.dkr.ecr.*.amazonaws.com.cn'\n    #             - '*.dkr.ecr-fips.*.amazonaws.com'\n    #             - '*.dkr.ecr.us-iso-east-1.c2s.ic.gov'\n    #             - '*.dkr.ecr.us-isob-east-1.sc2s.sgov.gov'\n    #           name: ecr-credential-provider\n\n    # # The `nodeIP` field is used to configure `--node-ip` flag for the kubelet.\n    # nodeIP:\n    #     # The `validSubnets` field configures the networks to pick kubelet node IP from.\n    #     validSubnets:\n    #         - 10.0.0.0/8\n    #         - '!10.0.0.3/32'\n    #         - fdc7::/16`</Accordion> | |
|`pods` |[]Unstructured |Used to provide static pod definitions to be run by the kubelet directly bypassing the kube-apiserver.<br /><br />Static pods can be used to run components which should be started before the Kubernetes control plane is up.<br />Talos doesn't validate the pod definition.<br />Updates to this field can be applied without a reboot.<br /><br />See https://kubernetes.io/docs/tasks/configure-pod-container/static-pod/. <Accordion title="Show example(s)">`pods:\n    - apiVersion: v1\n      kind: pod\n      metadata:\n        name: nginx\n      spec:\n        containers:\n            - image: nginx\n              name: nginx`</Accordion> | |
|`network` |<a href="#Config.machine.network">NetworkConfig</a> |Provides machine specific network configuration options. <Accordion title="Show example(s)">`network:\n    hostname: worker-1 # Used to statically set the hostname for the machine.\n    # `interfaces` is used to define the network interface configuration.\n    interfaces:\n        - interface: enp0s1 # The interface name.\n          # Assigns static IP addresses to the interface.\n          addresses:\n            - 192.168.2.0/24\n          # A list of routes associated with the interface.\n          routes:\n            - network: 0.0.0.0/0 # The route's network (destination).\n              gateway: 192.168.2.1 # The route's gateway (if empty, creates link scope route).\n              metric: 1024 # The optional metric for the route.\n          mtu: 1500 # The interface's MTU.\n\n          # # Picks a network device using the selector.\n\n          # # select a device with bus prefix 00:*.\n          # deviceSelector:\n          #     busPath: 00:* # PCI, USB bus prefix, supports matching by wildcard.\n          # # select a device with mac address matching `*:f0:ab` and `virtio` kernel driver.\n          # deviceSelector:\n          #     hardwareAddr: '*:f0:ab' # Device hardware (MAC) address, supports matching by wildcard.\n          #     driver: virtio_net # Kernel driver, supports matching by wildcard.\n          # # select a device with bus prefix 00:*, a device with mac address matching `*:f0:ab` and `virtio` kernel driver.\n          # deviceSelector:\n          #     - busPath: 00:* # PCI, USB bus prefix, supports matching by wildcard.\n          #     - hardwareAddr: '*:f0:ab' # Device hardware (MAC) address, supports matching by wildcard.\n          #       driver: virtio_net # Kernel driver, supports matching by wildcard.\n\n          # # Bond specific options.\n          # bond:\n          #     # The interfaces that make up the bond.\n          #     interfaces:\n          #         - enp2s0\n          #         - enp2s1\n          #     # Picks a network device using the selector.\n          #     deviceSelectors:\n          #         - busPath: 00:* # PCI, USB bus prefix, supports matching by wildcard.\n          #         - hardwareAddr: '*:f0:ab' # Device hardware (MAC) address, supports matching by wildcard.\n          #           driver: virtio_net # Kernel driver, supports matching by wildcard.\n          #     mode: 802.3ad # A bond option.\n          #     lacpRate: fast # A bond option.\n\n          # # Bridge specific options.\n          # bridge:\n          #     # The interfaces that make up the bridge.\n          #     interfaces:\n          #         - enxda4042ca9a51\n          #         - enxae2a6774c259\n          #     # Enable STP on this bridge.\n          #     stp:\n          #         enabled: true # Whether Spanning Tree Protocol (STP) is enabled.\n\n          # # Configure this device as a bridge port.\n          # bridgePort:\n          #     master: br0 # The name of the bridge master interface\n\n          # # Indicates if DHCP should be used to configure the interface.\n          # dhcp: true\n\n          # # DHCP specific options.\n          # dhcpOptions:\n          #     routeMetric: 1024 # The priority of all routes received via DHCP.\n\n          # # Wireguard specific configuration.\n\n          # # wireguard server example\n          # wireguard:\n          #     privateKey: ABCDEF... # Specifies a private key configuration (base64 encoded).\n          #     listenPort: 51111 # Specifies a device's listening port.\n          #     # Specifies a list of peer configurations to apply to a device.\n          #     peers:\n          #         - publicKey: ABCDEF... # Specifies the public key of this peer.\n          #           endpoint: 192.168.1.3 # Specifies the endpoint of this peer entry.\n          #           # AllowedIPs specifies a list of allowed IP addresses in CIDR notation for this peer.\n          #           allowedIPs:\n          #             - 192.168.1.0/24\n          # # wireguard peer example\n          # wireguard:\n          #     privateKey: ABCDEF... # Specifies a private key configuration (base64 encoded).\n          #     # Specifies a list of peer configurations to apply to a device.\n          #     peers:\n          #         - publicKey: ABCDEF... # Specifies the public key of this peer.\n          #           endpoint: 192.168.1.2:51822 # Specifies the endpoint of this peer entry.\n          #           persistentKeepaliveInterval: 10s # Specifies the persistent keepalive interval for this peer.\n          #           # AllowedIPs specifies a list of allowed IP addresses in CIDR notation for this peer.\n          #           allowedIPs:\n          #             - 192.168.1.0/24\n\n          # # Virtual (shared) IP address configuration.\n\n          # # layer2 vip example\n          # vip:\n          #     ip: 172.16.199.55 # Specifies the IP address to be used.\n    # Used to statically set the nameservers for the machine.\n    nameservers:\n        - 9.8.7.6\n        - 8.7.6.5\n    # Used to statically set arbitrary search domains.\n    searchDomains:\n        - example.org\n        - example.com\n\n    # # Allows for extra entries to be added to the `/etc/hosts` file\n    # extraHostEntries:\n    #     - ip: 192.168.1.100 # The IP of the host.\n    #       # The host alias.\n    #       aliases:\n    #         - example\n    #         - example.domain.tld\n\n    # # Configures KubeSpan feature.\n    # kubespan:\n    #     enabled: true # Enable the KubeSpan feature.`</Accordion> | |
|`install` |<a href="#Config.machine.install">InstallConfig</a> |Used to provide instructions for installations.<br /><br />Note that this configuration section gets silently ignored by Talos images that are considered pre-installed.<br />To make sure Talos installs according to the provided configuration, Talos should be booted with ISO or PXE-booted. <Accordion title="Show example(s)">`install:\n    disk: /dev/sda # The disk used for installations.\n    # Allows for supplying extra kernel args via the bootloader.\n    extraKernelArgs:\n        - console=ttyS1\n        - panic=10\n    image: ghcr.io/siderolabs/installer:latest # Allows for supplying the image used to perform the installation.\n    wipe: false # Indicates if the installation disk should be wiped at installation time.\n\n    # # Look up disk using disk attributes like model, size, serial and others.\n    # diskSelector:\n    #     size: 4GB # Disk size.\n    #     model: WDC* # Disk model `/sys/block/\<dev\>/device/model`.\n    #     busPath: /pci0000:00/0000:00:17.0/ata1/host0/target0:0:0/0:0:0:0 # Disk bus path.`</Accordion> | |
|`files` |<a href="#Config.machine.files.">[]MachineFile</a> |Allows the addition of user specified files.<br />The value of `op` can be `create`, `overwrite`, or `append`.<br />In the case of `create`, `path` must not exist.<br />In the case of `overwrite`, and `append`, `path` must be a valid file.<br />If an `op` value of `append` is used, the existing file will be appended.<br />Note that the file contents are not required to be base64 encoded. <Accordion title="Show example(s)">`files:\n    - content: '...' # The contents of the file.\n      permissions: 0o666 # The file's permissions in octal.\n      path: /tmp/file.txt # The path of the file.\n      op: append # The operation to use`</Accordion> | |
|`env` |Env |The `env` field allows for the addition of environment variables.<br />All environment variables are set on PID 1 in addition to every service. <Accordion title="Show example(s)">`env:\n    GRPC_GO_LOG_SEVERITY_LEVEL: info\n    GRPC_GO_LOG_VERBOSITY_LEVEL: "99"\n    https_proxy: http://SERVER:PORT/`<br />`env:\n    GRPC_GO_LOG_SEVERITY_LEVEL: error\n    https_proxy: https://USERNAME:PASSWORD@SERVER:PORT/`<br />`env:\n    https_proxy: http://DOMAIN\USERNAME:PASSWORD@SERVER:PORT/`</Accordion> |``GRPC_GO_LOG_VERBOSITY_LEVEL``<br />``GRPC_GO_LOG_SEVERITY_LEVEL``<br />``http_proxy``<br />``https_proxy``<br />``no_proxy``<br /> |
|`time` |<a href="#Config.machine.time">TimeConfig</a> |Used to configure the machine's time settings. <Accordion title="Show example(s)">`time:\n    disabled: false # Indicates if the time service is disabled for the machine.\n    # description: \|\n    servers:\n        - time.cloudflare.com\n    bootTimeout: 2m0s # Specifies the timeout when the node time is considered to be in sync unlocking the boot sequence.`</Accordion> | |
|`sysctls` |map[string]string |Used to configure the machine's sysctls. <Accordion title="Show example(s)">`sysctls:\n    kernel.domainname: talos.dev\n    net.ipv4.ip_forward: "0"\n    net/ipv6/conf/eth0.100/disable_ipv6: "1"`</Accordion> | |
|`sysfs` |map[string]string |Used to configure the machine's sysfs. <Accordion title="Show example(s)">`sysfs:\n    devices.system.cpu.cpu0.cpufreq.scaling_governor: performance`</Accordion> | |
|`registries` |<a href="#Config.machine.registries">RegistriesConfig</a> |Used to configure the machine's container image registry mirrors.<br /><br />Automatically generates matching CRI configuration for registry mirrors.<br /><br />The `mirrors` section allows to redirect requests for images to a non-default registry,<br />which might be a local registry or a caching mirror.<br /><br />The `config` section provides a way to authenticate to the registry with TLS client<br />identity, provide registry CA, or authentication information.<br />Authentication information has same meaning with the corresponding field in [`.docker/config.json`](https://docs.docker.com/engine/api/v1.41/#section/Authentication).<br /><br />See also matching configuration for [CRI containerd plugin](https://github.com/containerd/cri/blob/master/docs/registry.md). <Accordion title="Show example(s)">`registries:\n    # Specifies mirror configuration for each registry host namespace.\n    mirrors:\n        docker.io:\n            # List of endpoints (URLs) for registry mirrors to use.\n            endpoints:\n                - https://registry.local\n    # Specifies TLS & auth configuration for HTTPS image registries.\n    config:\n        registry.local:\n            # The TLS configuration for the registry.\n            tls:\n                # Enable mutual TLS authentication with the registry.\n                clientIdentity:\n                    crt: LS0tIEVYQU1QTEUgQ0VSVElGSUNBVEUgLS0t\n                    key: LS0tIEVYQU1QTEUgS0VZIC0tLQ==\n            # The auth configuration for this registry.\n            auth:\n                username: username # Optional registry authentication.\n                password: password # Optional registry authentication.`</Accordion> | |
|`features` |<a href="#Config.machine.features">FeaturesConfig</a> |Features describe individual Talos features that can be switched on or off. <Accordion title="Show example(s)">`features:\n    rbac: true # Enable role-based access control (RBAC).\n\n    # # Configure Talos API access from Kubernetes pods.\n    # kubernetesTalosAPIAccess:\n    #     enabled: true # Enable Talos API access from Kubernetes pods.\n    #     # The list of Talos API roles which can be granted for access from Kubernetes pods.\n    #     allowedRoles:\n    #         - os:reader\n    #     # The list of Kubernetes namespaces Talos API access is available from.\n    #     allowedKubernetesNamespaces:\n    #         - kube-system`</Accordion> | |
|`udev` |<a href="#Config.machine.udev">UdevConfig</a> |Configures the udev system. <Accordion title="Show example(s)">`udev:\n    # List of udev rules to apply to the udev system\n    rules:\n        - SUBSYSTEM=="drm", KERNEL=="renderD*", GROUP="44", MODE="0660"`</Accordion> | |
|`logging` |<a href="#Config.machine.logging">LoggingConfig</a> |Configures the logging system. <Accordion title="Show example(s)">`logging:\n    # Logging destination.\n    destinations:\n        - endpoint: tcp://1.2.3.4:12345 # Where to send logs. Supported protocols are "tcp" and "udp".\n          format: json_lines # Logs format.`</Accordion> | |
|`kernel` |<a href="#Config.machine.kernel">KernelConfig</a> |Configures the kernel. <Accordion title="Show example(s)">`kernel:\n    # Kernel modules to load.\n    modules:\n        - name: brtfs # Module name.`</Accordion> | |
|`seccompProfiles` |<a href="#Config.machine.seccompProfiles.">[]MachineSeccompProfile</a> |Configures the seccomp profiles for the machine. <Accordion title="Show example(s)">`seccompProfiles:\n    - name: audit.json # The `name` field is used to provide the file name of the seccomp profile.\n      # The `value` field is used to provide the seccomp profile.\n      value:\n        defaultAction: SCMP_ACT_LOG`</Accordion> | |
|`baseRuntimeSpecOverrides` |Unstructured |Override (patch) settings in the default OCI runtime spec for CRI containers.<br /><br />It can be used to set some default container settings which are not configurable in Kubernetes,<br />for example default ulimits.<br />Note: this change applies to all newly created containers, and it requires a reboot to take effect. <Accordion title="Show example(s)">`baseRuntimeSpecOverrides:\n    process:\n        rlimits:\n            - hard: 1024\n              soft: 1024\n              type: RLIMIT_NOFILE`</Accordion> | |
|`nodeLabels` |map[string]string |Configures the node labels for the machine.<br /><br />Note: In the default Kubernetes configuration, worker nodes are restricted to set<br />labels with some prefixes (see [NodeRestriction](https://kubernetes.io/docs/reference/access-authn-authz/admission-controllers/#noderestriction) admission plugin). <Accordion title="Show example(s)">`nodeLabels:\n    exampleLabel: exampleLabelValue`</Accordion> | |
|`nodeAnnotations` |map[string]string |Configures the node annotations for the machine. <Accordion title="Show example(s)">`nodeAnnotations:\n    customer.io/rack: r13a25`</Accordion> | |
|`nodeTaints` |map[string]string |Configures the node taints for the machine. Effect is optional.<br /><br />Note: In the default Kubernetes configuration, worker nodes are not allowed to<br />modify the taints (see [NodeRestriction](https://kubernetes.io/docs/reference/access-authn-authz/admission-controllers/#noderestriction) admission plugin). <Accordion title="Show example(s)">`nodeTaints:\n    exampleTaint: exampleTaintValue:NoSchedule`</Accordion> | |




### controlPlane

MachineControlPlaneConfig machine specific configuration options.



```yaml
machine:
    controlPlane:
        # Controller manager machine specific configuration options.
        controllerManager:
            disabled: false # Disable kube-controller-manager on the node.
        # Scheduler machine specific configuration options.
        scheduler:
            disabled: true # Disable kube-scheduler on the node.
```


| Field | Type | Description | Value(s) |
|-------|------|-------------|----------|
|`controllerManager` |<a href="#Config.machine.controlPlane.controllerManager">MachineControllerManagerConfig</a> |Controller manager machine specific configuration options.  | |
|`scheduler` |<a href="#Config.machine.controlPlane.scheduler">MachineSchedulerConfig</a> |Scheduler machine specific configuration options.  | |




#### controllerManager

MachineControllerManagerConfig represents the machine specific ControllerManager config values.




| Field | Type | Description | Value(s) |
|-------|------|-------------|----------|
|`disabled` |bool |Disable kube-controller-manager on the node.  | |






#### scheduler

MachineSchedulerConfig represents the machine specific Scheduler config values.




| Field | Type | Description | Value(s) |
|-------|------|-------------|----------|
|`disabled` |bool |Disable kube-scheduler on the node.  | |








### kubelet

KubeletConfig represents the kubelet config values.



```yaml
machine:
    kubelet:
        image: ghcr.io/siderolabs/kubelet:v1.34.1 # The `image` field is an optional reference to an alternative kubelet image.
        # The `extraArgs` field is used to provide additional flags to the kubelet.
        extraArgs:
            feature-gates: ServerSideApply=true

        # # The `ClusterDNS` field is an optional reference to an alternative kubelet clusterDNS ip list.
        # clusterDNS:
        #     - 10.96.0.10
        #     - 169.254.2.53

        # # The `extraMounts` field is used to add additional mounts to the kubelet container.
        # extraMounts:
        #     - destination: /var/lib/example # Destination is the absolute path where the mount will be placed in the container.
        #       type: bind # Type specifies the mount kind.
        #       source: /var/lib/example # Source specifies the source path of the mount.
        #       # Options are fstab style mount options.
        #       options:
        #         - bind
        #         - rshared
        #         - rw

        # # The `extraConfig` field is used to provide kubelet configuration overrides.
        # extraConfig:
        #     serverTLSBootstrap: true

        # # The `KubeletCredentialProviderConfig` field is used to provide kubelet credential configuration.
        # credentialProviderConfig:
        #     apiVersion: kubelet.config.k8s.io/v1
        #     kind: CredentialProviderConfig
        #     providers:
        #         - apiVersion: credentialprovider.kubelet.k8s.io/v1
        #           defaultCacheDuration: 12h
        #           matchImages:
        #             - '*.dkr.ecr.*.amazonaws.com'
        #             - '*.dkr.ecr.*.amazonaws.com.cn'
        #             - '*.dkr.ecr-fips.*.amazonaws.com'
        #             - '*.dkr.ecr.us-iso-east-1.c2s.ic.gov'
        #             - '*.dkr.ecr.us-isob-east-1.sc2s.sgov.gov'
        #           name: ecr-credential-provider

        # # The `nodeIP` field is used to configure `--node-ip` flag for the kubelet.
        # nodeIP:
        #     # The `validSubnets` field configures the networks to pick kubelet node IP from.
        #     validSubnets:
        #         - 10.0.0.0/8
        #         - '!10.0.0.3/32'
        #         - fdc7::/16
```


| Field | Type | Description | Value(s) |
|-------|------|-------------|----------|
|`image` |string |The `image` field is an optional reference to an alternative kubelet image. <Accordion title="Show example(s)">`image: ghcr.io/siderolabs/kubelet:v1.34.1`</Accordion> | |
|`clusterDNS` |[]string |The `ClusterDNS` field is an optional reference to an alternative kubelet clusterDNS ip list. <Accordion title="Show example(s)">`clusterDNS:\n    - 10.96.0.10\n    - 169.254.2.53`</Accordion> | |
|`extraArgs` |map[string]string |The `extraArgs` field is used to provide additional flags to the kubelet. <Accordion title="Show example(s)">`extraArgs:\n    key: value`</Accordion> | |
|`extraMounts` |<a href="#Config.machine.kubelet.extraMounts.">[]ExtraMount</a> |The `extraMounts` field is used to add additional mounts to the kubelet container.<br />Note that either `bind` or `rbind` are required in the `options`. <Accordion title="Show example(s)">`extraMounts:\n    - destination: /var/lib/example # Destination is the absolute path where the mount will be placed in the container.\n      type: bind # Type specifies the mount kind.\n      source: /var/lib/example # Source specifies the source path of the mount.\n      # Options are fstab style mount options.\n      options:\n        - bind\n        - rshared\n        - rw`</Accordion> | |
|`extraConfig` |Unstructured |The `extraConfig` field is used to provide kubelet configuration overrides.<br /><br />Some fields are not allowed to be overridden: authentication and authorization, cgroups<br />configuration, ports, etc. <Accordion title="Show example(s)">`extraConfig:\n    serverTLSBootstrap: true`</Accordion> | |
|`credentialProviderConfig` |Unstructured |The `KubeletCredentialProviderConfig` field is used to provide kubelet credential configuration. <Accordion title="Show example(s)">`credentialProviderConfig:\n    apiVersion: kubelet.config.k8s.io/v1\n    kind: CredentialProviderConfig\n    providers:\n        - apiVersion: credentialprovider.kubelet.k8s.io/v1\n          defaultCacheDuration: 12h\n          matchImages:\n            - '*.dkr.ecr.*.amazonaws.com'\n            - '*.dkr.ecr.*.amazonaws.com.cn'\n            - '*.dkr.ecr-fips.*.amazonaws.com'\n            - '*.dkr.ecr.us-iso-east-1.c2s.ic.gov'\n            - '*.dkr.ecr.us-isob-east-1.sc2s.sgov.gov'\n          name: ecr-credential-provider`</Accordion> | |
|`defaultRuntimeSeccompProfileEnabled` |bool |Enable container runtime default Seccomp profile.  |`true`<br />`yes`<br />`false`<br />`no`<br /> |
|`registerWithFQDN` |bool |The `registerWithFQDN` field is used to force kubelet to use the node FQDN for registration.<br />This is required in clouds like AWS.  |`true`<br />`yes`<br />`false`<br />`no`<br /> |
|`nodeIP` |<a href="#Config.machine.kubelet.nodeIP">KubeletNodeIPConfig</a> |The `nodeIP` field is used to configure `--node-ip` flag for the kubelet.<br />This is used when a node has multiple addresses to choose from. <Accordion title="Show example(s)">`nodeIP:\n    # The `validSubnets` field configures the networks to pick kubelet node IP from.\n    validSubnets:\n        - 10.0.0.0/8\n        - '!10.0.0.3/32'\n        - fdc7::/16`</Accordion> | |
|`skipNodeRegistration` |bool |The `skipNodeRegistration` is used to run the kubelet without registering with the apiserver.<br />This runs kubelet as standalone and only runs static pods.  |`true`<br />`yes`<br />`false`<br />`no`<br /> |
|`disableManifestsDirectory` |bool |The `disableManifestsDirectory` field configures the kubelet to get static pod manifests from the /etc/kubernetes/manifests directory.<br />It's recommended to configure static pods with the "pods" key instead.  |`true`<br />`yes`<br />`false`<br />`no`<br /> |




#### extraMounts[]

ExtraMount wraps OCI Mount specification.



```yaml
machine:
    kubelet:
        extraMounts:
            - destination: /var/lib/example # Destination is the absolute path where the mount will be placed in the container.
              type: bind # Type specifies the mount kind.
              source: /var/lib/example # Source specifies the source path of the mount.
              # Options are fstab style mount options.
              options:
                - bind
                - rshared
                - rw
```


| Field | Type | Description | Value(s) |
|-------|------|-------------|----------|
|`destination` |string |Destination is the absolute path where the mount will be placed in the container.  | |
|`type` |string |Type specifies the mount kind.  | |
|`source` |string |Source specifies the source path of the mount.  | |
|`options` |[]string |Options are fstab style mount options.  | |
|`uidMappings` |<a href="#Config.machine.kubelet.extraMounts..uidMappings.">[]LinuxIDMapping</a> |UID/GID mappings used for changing file owners w/o calling chown, fs should support it.<br /><br />Every mount point could have its own mapping.  | |
|`gidMappings` |<a href="#Config.machine.kubelet.extraMounts..gidMappings.">[]LinuxIDMapping</a> |UID/GID mappings used for changing file owners w/o calling chown, fs should support it.<br /><br />Every mount point could have its own mapping.  | |




##### uidMappings[]

LinuxIDMapping represents the Linux ID mapping.




| Field | Type | Description | Value(s) |
|-------|------|-------------|----------|
|`containerID` |uint32 |ContainerID is the starting UID/GID in the container.  | |
|`hostID` |uint32 |HostID is the starting UID/GID on the host to be mapped to 'ContainerID'.  | |
|`size` |uint32 |Size is the number of IDs to be mapped.  | |






##### gidMappings[]

LinuxIDMapping represents the Linux ID mapping.




| Field | Type | Description | Value(s) |
|-------|------|-------------|----------|
|`containerID` |uint32 |ContainerID is the starting UID/GID in the container.  | |
|`hostID` |uint32 |HostID is the starting UID/GID on the host to be mapped to 'ContainerID'.  | |
|`size` |uint32 |Size is the number of IDs to be mapped.  | |








#### nodeIP

KubeletNodeIPConfig represents the kubelet node IP configuration.



```yaml
machine:
    kubelet:
        nodeIP:
            # The `validSubnets` field configures the networks to pick kubelet node IP from.
            validSubnets:
                - 10.0.0.0/8
                - '!10.0.0.3/32'
                - fdc7::/16
```


| Field | Type | Description | Value(s) |
|-------|------|-------------|----------|
|`validSubnets` |[]string |The `validSubnets` field configures the networks to pick kubelet node IP from.<br />For dual stack configuration, there should be two subnets: one for IPv4, another for IPv6.<br />IPs can be excluded from the list by using negative match with `!`, e.g `!10.0.0.0/8`.<br />Negative subnet matches should be specified last to filter out IPs picked by positive matches.<br />If not specified, node IP is picked based on cluster podCIDRs: IPv4/IPv6 address or both.  | |








### network

NetworkConfig represents the machine's networking config values.



```yaml
machine:
    network:
        hostname: worker-1 # Used to statically set the hostname for the machine.
        # `interfaces` is used to define the network interface configuration.
        interfaces:
            - interface: enp0s1 # The interface name.
              # Assigns static IP addresses to the interface.
              addresses:
                - 192.168.2.0/24
              # A list of routes associated with the interface.
              routes:
                - network: 0.0.0.0/0 # The route's network (destination).
                  gateway: 192.168.2.1 # The route's gateway (if empty, creates link scope route).
                  metric: 1024 # The optional metric for the route.
              mtu: 1500 # The interface's MTU.

              # # Picks a network device using the selector.

              # # select a device with bus prefix 00:*.
              # deviceSelector:
              #     busPath: 00:* # PCI, USB bus prefix, supports matching by wildcard.
              # # select a device with mac address matching `*:f0:ab` and `virtio` kernel driver.
              # deviceSelector:
              #     hardwareAddr: '*:f0:ab' # Device hardware (MAC) address, supports matching by wildcard.
              #     driver: virtio_net # Kernel driver, supports matching by wildcard.
              # # select a device with bus prefix 00:*, a device with mac address matching `*:f0:ab` and `virtio` kernel driver.
              # deviceSelector:
              #     - busPath: 00:* # PCI, USB bus prefix, supports matching by wildcard.
              #     - hardwareAddr: '*:f0:ab' # Device hardware (MAC) address, supports matching by wildcard.
              #       driver: virtio_net # Kernel driver, supports matching by wildcard.

              # # Bond specific options.
              # bond:
              #     # The interfaces that make up the bond.
              #     interfaces:
              #         - enp2s0
              #         - enp2s1
              #     # Picks a network device using the selector.
              #     deviceSelectors:
              #         - busPath: 00:* # PCI, USB bus prefix, supports matching by wildcard.
              #         - hardwareAddr: '*:f0:ab' # Device hardware (MAC) address, supports matching by wildcard.
              #           driver: virtio_net # Kernel driver, supports matching by wildcard.
              #     mode: 802.3ad # A bond option.
              #     lacpRate: fast # A bond option.

              # # Bridge specific options.
              # bridge:
              #     # The interfaces that make up the bridge.
              #     interfaces:
              #         - enxda4042ca9a51
              #         - enxae2a6774c259
              #     # Enable STP on this bridge.
              #     stp:
              #         enabled: true # Whether Spanning Tree Protocol (STP) is enabled.

              # # Configure this device as a bridge port.
              # bridgePort:
              #     master: br0 # The name of the bridge master interface

              # # Indicates if DHCP should be used to configure the interface.
              # dhcp: true

              # # DHCP specific options.
              # dhcpOptions:
              #     routeMetric: 1024 # The priority of all routes received via DHCP.

              # # Wireguard specific configuration.

              # # wireguard server example
              # wireguard:
              #     privateKey: ABCDEF... # Specifies a private key configuration (base64 encoded).
              #     listenPort: 51111 # Specifies a device's listening port.
              #     # Specifies a list of peer configurations to apply to a device.
              #     peers:
              #         - publicKey: ABCDEF... # Specifies the public key of this peer.
              #           endpoint: 192.168.1.3 # Specifies the endpoint of this peer entry.
              #           # AllowedIPs specifies a list of allowed IP addresses in CIDR notation for this peer.
              #           allowedIPs:
              #             - 192.168.1.0/24
              # # wireguard peer example
              # wireguard:
              #     privateKey: ABCDEF... # Specifies a private key configuration (base64 encoded).
              #     # Specifies a list of peer configurations to apply to a device.
              #     peers:
              #         - publicKey: ABCDEF... # Specifies the public key of this peer.
              #           endpoint: 192.168.1.2:51822 # Specifies the endpoint of this peer entry.
              #           persistentKeepaliveInterval: 10s # Specifies the persistent keepalive interval for this peer.
              #           # AllowedIPs specifies a list of allowed IP addresses in CIDR notation for this peer.
              #           allowedIPs:
              #             - 192.168.1.0/24

              # # Virtual (shared) IP address configuration.

              # # layer2 vip example
              # vip:
              #     ip: 172.16.199.55 # Specifies the IP address to be used.
        # Used to statically set the nameservers for the machine.
        nameservers:
            - 9.8.7.6
            - 8.7.6.5
        # Used to statically set arbitrary search domains.
        searchDomains:
            - example.org
            - example.com

        # # Allows for extra entries to be added to the `/etc/hosts` file
        # extraHostEntries:
        #     - ip: 192.168.1.100 # The IP of the host.
        #       # The host alias.
        #       aliases:
        #         - example
        #         - example.domain.tld

        # # Configures KubeSpan feature.
        # kubespan:
        #     enabled: true # Enable the KubeSpan feature.
```


| Field | Type | Description | Value(s) |
|-------|------|-------------|----------|
|`hostname` |string |Used to statically set the hostname for the machine.  | |
|`interfaces` |<a href="#Config.machine.network.interfaces.">[]Device</a> |`interfaces` is used to define the network interface configuration.<br />By default all network interfaces will attempt a DHCP discovery.<br />This can be further tuned through this configuration parameter. <Accordion title="Show example(s)">`interfaces:\n    - interface: enp0s1 # The interface name.\n      # Assigns static IP addresses to the interface.\n      addresses:\n        - 192.168.2.0/24\n      # A list of routes associated with the interface.\n      routes:\n        - network: 0.0.0.0/0 # The route's network (destination).\n          gateway: 192.168.2.1 # The route's gateway (if empty, creates link scope route).\n          metric: 1024 # The optional metric for the route.\n      mtu: 1500 # The interface's MTU.\n\n      # # Picks a network device using the selector.\n\n      # # select a device with bus prefix 00:*.\n      # deviceSelector:\n      #     busPath: 00:* # PCI, USB bus prefix, supports matching by wildcard.\n      # # select a device with mac address matching `*:f0:ab` and `virtio` kernel driver.\n      # deviceSelector:\n      #     hardwareAddr: '*:f0:ab' # Device hardware (MAC) address, supports matching by wildcard.\n      #     driver: virtio_net # Kernel driver, supports matching by wildcard.\n      # # select a device with bus prefix 00:*, a device with mac address matching `*:f0:ab` and `virtio` kernel driver.\n      # deviceSelector:\n      #     - busPath: 00:* # PCI, USB bus prefix, supports matching by wildcard.\n      #     - hardwareAddr: '*:f0:ab' # Device hardware (MAC) address, supports matching by wildcard.\n      #       driver: virtio_net # Kernel driver, supports matching by wildcard.\n\n      # # Bond specific options.\n      # bond:\n      #     # The interfaces that make up the bond.\n      #     interfaces:\n      #         - enp2s0\n      #         - enp2s1\n      #     # Picks a network device using the selector.\n      #     deviceSelectors:\n      #         - busPath: 00:* # PCI, USB bus prefix, supports matching by wildcard.\n      #         - hardwareAddr: '*:f0:ab' # Device hardware (MAC) address, supports matching by wildcard.\n      #           driver: virtio_net # Kernel driver, supports matching by wildcard.\n      #     mode: 802.3ad # A bond option.\n      #     lacpRate: fast # A bond option.\n\n      # # Bridge specific options.\n      # bridge:\n      #     # The interfaces that make up the bridge.\n      #     interfaces:\n      #         - enxda4042ca9a51\n      #         - enxae2a6774c259\n      #     # Enable STP on this bridge.\n      #     stp:\n      #         enabled: true # Whether Spanning Tree Protocol (STP) is enabled.\n\n      # # Configure this device as a bridge port.\n      # bridgePort:\n      #     master: br0 # The name of the bridge master interface\n\n      # # Indicates if DHCP should be used to configure the interface.\n      # dhcp: true\n\n      # # DHCP specific options.\n      # dhcpOptions:\n      #     routeMetric: 1024 # The priority of all routes received via DHCP.\n\n      # # Wireguard specific configuration.\n\n      # # wireguard server example\n      # wireguard:\n      #     privateKey: ABCDEF... # Specifies a private key configuration (base64 encoded).\n      #     listenPort: 51111 # Specifies a device's listening port.\n      #     # Specifies a list of peer configurations to apply to a device.\n      #     peers:\n      #         - publicKey: ABCDEF... # Specifies the public key of this peer.\n      #           endpoint: 192.168.1.3 # Specifies the endpoint of this peer entry.\n      #           # AllowedIPs specifies a list of allowed IP addresses in CIDR notation for this peer.\n      #           allowedIPs:\n      #             - 192.168.1.0/24\n      # # wireguard peer example\n      # wireguard:\n      #     privateKey: ABCDEF... # Specifies a private key configuration (base64 encoded).\n      #     # Specifies a list of peer configurations to apply to a device.\n      #     peers:\n      #         - publicKey: ABCDEF... # Specifies the public key of this peer.\n      #           endpoint: 192.168.1.2:51822 # Specifies the endpoint of this peer entry.\n      #           persistentKeepaliveInterval: 10s # Specifies the persistent keepalive interval for this peer.\n      #           # AllowedIPs specifies a list of allowed IP addresses in CIDR notation for this peer.\n      #           allowedIPs:\n      #             - 192.168.1.0/24\n\n      # # Virtual (shared) IP address configuration.\n\n      # # layer2 vip example\n      # vip:\n      #     ip: 172.16.199.55 # Specifies the IP address to be used.`</Accordion> | |
|`nameservers` |[]string |Used to statically set the nameservers for the machine.<br />Defaults to `1.1.1.1` and `8.8.8.8` <Accordion title="Show example(s)">`nameservers:\n    - 8.8.8.8\n    - 1.1.1.1`</Accordion> | |
|`searchDomains` |[]string |Used to statically set arbitrary search domains. <Accordion title="Show example(s)">`searchDomains:\n    - example.org\n    - example.com`</Accordion> | |
|`extraHostEntries` |<a href="#Config.machine.network.extraHostEntries.">[]ExtraHost</a> |Allows for extra entries to be added to the `/etc/hosts` file <Accordion title="Show example(s)">`extraHostEntries:\n    - ip: 192.168.1.100 # The IP of the host.\n      # The host alias.\n      aliases:\n        - example\n        - example.domain.tld`</Accordion> | |
|`kubespan` |<a href="#Config.machine.network.kubespan">NetworkKubeSpan</a> |Configures KubeSpan feature. <Accordion title="Show example(s)">`kubespan:\n    enabled: true # Enable the KubeSpan feature.`</Accordion> | |
|`disableSearchDomain` |bool |Disable generating a default search domain in /etc/resolv.conf<br />based on the machine hostname.<br />Defaults to `false`.  |`true`<br />`yes`<br />`false`<br />`no`<br /> |




#### interfaces[]

Device represents a network interface.



```yaml
machine:
    network:
        interfaces:
            - interface: enp0s1 # The interface name.
              # Assigns static IP addresses to the interface.
              addresses:
                - 192.168.2.0/24
              # A list of routes associated with the interface.
              routes:
                - network: 0.0.0.0/0 # The route's network (destination).
                  gateway: 192.168.2.1 # The route's gateway (if empty, creates link scope route).
                  metric: 1024 # The optional metric for the route.
              mtu: 1500 # The interface's MTU.

              # # Picks a network device using the selector.

              # # select a device with bus prefix 00:*.
              # deviceSelector:
              #     busPath: 00:* # PCI, USB bus prefix, supports matching by wildcard.
              # # select a device with mac address matching `*:f0:ab` and `virtio` kernel driver.
              # deviceSelector:
              #     hardwareAddr: '*:f0:ab' # Device hardware (MAC) address, supports matching by wildcard.
              #     driver: virtio_net # Kernel driver, supports matching by wildcard.
              # # select a device with bus prefix 00:*, a device with mac address matching `*:f0:ab` and `virtio` kernel driver.
              # deviceSelector:
              #     - busPath: 00:* # PCI, USB bus prefix, supports matching by wildcard.
              #     - hardwareAddr: '*:f0:ab' # Device hardware (MAC) address, supports matching by wildcard.
              #       driver: virtio_net # Kernel driver, supports matching by wildcard.

              # # Bond specific options.
              # bond:
              #     # The interfaces that make up the bond.
              #     interfaces:
              #         - enp2s0
              #         - enp2s1
              #     # Picks a network device using the selector.
              #     deviceSelectors:
              #         - busPath: 00:* # PCI, USB bus prefix, supports matching by wildcard.
              #         - hardwareAddr: '*:f0:ab' # Device hardware (MAC) address, supports matching by wildcard.
              #           driver: virtio_net # Kernel driver, supports matching by wildcard.
              #     mode: 802.3ad # A bond option.
              #     lacpRate: fast # A bond option.

              # # Bridge specific options.
              # bridge:
              #     # The interfaces that make up the bridge.
              #     interfaces:
              #         - enxda4042ca9a51
              #         - enxae2a6774c259
              #     # Enable STP on this bridge.
              #     stp:
              #         enabled: true # Whether Spanning Tree Protocol (STP) is enabled.

              # # Configure this device as a bridge port.
              # bridgePort:
              #     master: br0 # The name of the bridge master interface

              # # Indicates if DHCP should be used to configure the interface.
              # dhcp: true

              # # DHCP specific options.
              # dhcpOptions:
              #     routeMetric: 1024 # The priority of all routes received via DHCP.

              # # Wireguard specific configuration.

              # # wireguard server example
              # wireguard:
              #     privateKey: ABCDEF... # Specifies a private key configuration (base64 encoded).
              #     listenPort: 51111 # Specifies a device's listening port.
              #     # Specifies a list of peer configurations to apply to a device.
              #     peers:
              #         - publicKey: ABCDEF... # Specifies the public key of this peer.
              #           endpoint: 192.168.1.3 # Specifies the endpoint of this peer entry.
              #           # AllowedIPs specifies a list of allowed IP addresses in CIDR notation for this peer.
              #           allowedIPs:
              #             - 192.168.1.0/24
              # # wireguard peer example
              # wireguard:
              #     privateKey: ABCDEF... # Specifies a private key configuration (base64 encoded).
              #     # Specifies a list of peer configurations to apply to a device.
              #     peers:
              #         - publicKey: ABCDEF... # Specifies the public key of this peer.
              #           endpoint: 192.168.1.2:51822 # Specifies the endpoint of this peer entry.
              #           persistentKeepaliveInterval: 10s # Specifies the persistent keepalive interval for this peer.
              #           # AllowedIPs specifies a list of allowed IP addresses in CIDR notation for this peer.
              #           allowedIPs:
              #             - 192.168.1.0/24

              # # Virtual (shared) IP address configuration.

              # # layer2 vip example
              # vip:
              #     ip: 172.16.199.55 # Specifies the IP address to be used.
```


| Field | Type | Description | Value(s) |
|-------|------|-------------|----------|
|`interface` |string |The interface name.<br />Mutually exclusive with `deviceSelector`. <Accordion title="Show example(s)">`interface: enp0s3`</Accordion> | |
|`deviceSelector` |<a href="#Config.machine.network.interfaces..deviceSelector">NetworkDeviceSelector</a> |Picks a network device using the selector.<br />Mutually exclusive with `interface`.<br />Supports partial match using wildcard syntax. <Accordion title="Show example(s)">`deviceSelector:\n    busPath: 00:* # PCI, USB bus prefix, supports matching by wildcard.`<br />`deviceSelector:\n    hardwareAddr: '*:f0:ab' # Device hardware (MAC) address, supports matching by wildcard.\n    driver: virtio_net # Kernel driver, supports matching by wildcard.`</Accordion> | |
|`addresses` |[]string |Assigns static IP addresses to the interface.<br />An address can be specified either in proper CIDR notation or as a standalone address (netmask of all ones is assumed). <Accordion title="Show example(s)">`addresses:\n    - 10.5.0.0/16\n    - 192.168.3.7`</Accordion> | |
|`routes` |<a href="#Config.machine.network.interfaces..routes.">[]Route</a> |A list of routes associated with the interface.<br />If used in combination with DHCP, these routes will be appended to routes returned by DHCP server. <Accordion title="Show example(s)">`routes:\n    - network: 0.0.0.0/0 # The route's network (destination).\n      gateway: 10.5.0.1 # The route's gateway (if empty, creates link scope route).\n    - network: 10.2.0.0/16 # The route's network (destination).\n      gateway: 10.2.0.1 # The route's gateway (if empty, creates link scope route).`</Accordion> | |
|`bond` |<a href="#Config.machine.network.interfaces..bond">Bond</a> |Bond specific options. <Accordion title="Show example(s)">`bond:\n    # The interfaces that make up the bond.\n    interfaces:\n        - enp2s0\n        - enp2s1\n    mode: 802.3ad # A bond option.\n    lacpRate: fast # A bond option.\n\n    # # Picks a network device using the selector.\n\n    # # select a device with bus prefix 00:*, a device with mac address matching `*:f0:ab` and `virtio` kernel driver.\n    # deviceSelectors:\n    #     - busPath: 00:* # PCI, USB bus prefix, supports matching by wildcard.\n    #     - hardwareAddr: '*:f0:ab' # Device hardware (MAC) address, supports matching by wildcard.\n    #       driver: virtio_net # Kernel driver, supports matching by wildcard.`</Accordion> | |
|`bridge` |<a href="#Config.machine.network.interfaces..bridge">Bridge</a> |Bridge specific options. <Accordion title="Show example(s)">`bridge:\n    # The interfaces that make up the bridge.\n    interfaces:\n        - enxda4042ca9a51\n        - enxae2a6774c259\n    # Enable STP on this bridge.\n    stp:\n        enabled: true # Whether Spanning Tree Protocol (STP) is enabled.`</Accordion> | |
|`bridgePort` |<a href="#Config.machine.network.interfaces..bridgePort">BridgePort</a> |Configure this device as a bridge port.<br />This can be used to dynamically assign network interfaces to a bridge. <Accordion title="Show example(s)">`bridgePort:\n    master: br0 # The name of the bridge master interface`</Accordion> | |
|`vlans` |<a href="#Config.machine.network.interfaces..vlans.">[]Vlan</a> |VLAN specific options.  | |
|`mtu` |int |The interface's MTU.<br />If used in combination with DHCP, this will override any MTU settings returned from DHCP server.  | |
|`dhcp` |bool |Indicates if DHCP should be used to configure the interface.<br />The following DHCP options are supported:<br /><br />- `OptionClasslessStaticRoute`<br />- `OptionDomainNameServer`<br />- `OptionDNSDomainSearchList`<br />- `OptionHostName` <Accordion title="Show example(s)">`dhcp: true`</Accordion> | |
|`ignore` |bool |Indicates if the interface should be ignored (skips configuration).  | |
|`dummy` |bool |Indicates if the interface is a dummy interface.<br />`dummy` is used to specify that this interface should be a virtual-only, dummy interface.  | |
|`dhcpOptions` |<a href="#Config.machine.network.interfaces..dhcpOptions">DHCPOptions</a> |DHCP specific options.<br />`dhcp` *must* be set to true for these to take effect. <Accordion title="Show example(s)">`dhcpOptions:\n    routeMetric: 1024 # The priority of all routes received via DHCP.`</Accordion> | |
|`wireguard` |<a href="#Config.machine.network.interfaces..wireguard">DeviceWireguardConfig</a> |Wireguard specific configuration.<br />Includes things like private key, listen port, peers. <Accordion title="Show example(s)">`wireguard:\n    privateKey: ABCDEF... # Specifies a private key configuration (base64 encoded).\n    listenPort: 51111 # Specifies a device's listening port.\n    # Specifies a list of peer configurations to apply to a device.\n    peers:\n        - publicKey: ABCDEF... # Specifies the public key of this peer.\n          endpoint: 192.168.1.3 # Specifies the endpoint of this peer entry.\n          # AllowedIPs specifies a list of allowed IP addresses in CIDR notation for this peer.\n          allowedIPs:\n            - 192.168.1.0/24`<br />`wireguard:\n    privateKey: ABCDEF... # Specifies a private key configuration (base64 encoded).\n    # Specifies a list of peer configurations to apply to a device.\n    peers:\n        - publicKey: ABCDEF... # Specifies the public key of this peer.\n          endpoint: 192.168.1.2:51822 # Specifies the endpoint of this peer entry.\n          persistentKeepaliveInterval: 10s # Specifies the persistent keepalive interval for this peer.\n          # AllowedIPs specifies a list of allowed IP addresses in CIDR notation for this peer.\n          allowedIPs:\n            - 192.168.1.0/24`</Accordion> | |
|`vip` |<a href="#Config.machine.network.interfaces..vip">DeviceVIPConfig</a> |Virtual (shared) IP address configuration. <Accordion title="Show example(s)">`vip:\n    ip: 172.16.199.55 # Specifies the IP address to be used.`</Accordion> | |




##### deviceSelector

NetworkDeviceSelector struct describes network device selector.



```yaml
machine:
    network:
        interfaces:
            - deviceSelector:
                busPath: 00:* # PCI, USB bus prefix, supports matching by wildcard.
```

```yaml
machine:
    network:
        interfaces:
            - deviceSelector:
                hardwareAddr: '*:f0:ab' # Device hardware (MAC) address, supports matching by wildcard.
                driver: virtio_net # Kernel driver, supports matching by wildcard.
```

```yaml
machine:
    network:
        interfaces:
            - deviceSelector:
                - busPath: 00:* # PCI, USB bus prefix, supports matching by wildcard.
                - hardwareAddr: '*:f0:ab' # Device hardware (MAC) address, supports matching by wildcard.
                  driver: virtio_net # Kernel driver, supports matching by wildcard.
```


| Field | Type | Description | Value(s) |
|-------|------|-------------|----------|
|`busPath` |string |PCI, USB bus prefix, supports matching by wildcard.  | |
|`hardwareAddr` |string |Device hardware (MAC) address, supports matching by wildcard.  | |
|`permanentAddr` |string |Device permanent hardware address, supports matching by wildcard.<br />The permanent address doesn't change when the link is enslaved to a bond,<br />so it's recommended to use this field for bond members.  | |
|`pciID` |string |PCI ID (vendor ID, product ID), supports matching by wildcard.  | |
|`driver` |string |Kernel driver, supports matching by wildcard.  | |
|`physical` |bool |Select only physical devices.  | |






##### routes[]

Route represents a network route.



```yaml
machine:
    network:
        interfaces:
            - routes:
                - network: 0.0.0.0/0 # The route's network (destination).
                  gateway: 10.5.0.1 # The route's gateway (if empty, creates link scope route).
                - network: 10.2.0.0/16 # The route's network (destination).
                  gateway: 10.2.0.1 # The route's gateway (if empty, creates link scope route).
```


| Field | Type | Description | Value(s) |
|-------|------|-------------|----------|
|`network` |string |The route's network (destination).  | |
|`gateway` |string |The route's gateway (if empty, creates link scope route).  | |
|`source` |string |The route's source address (optional).  | |
|`metric` |uint32 |The optional metric for the route.  | |
|`mtu` |uint32 |The optional MTU for the route.  | |






##### bond

Bond contains the various options for configuring a bonded interface.



```yaml
machine:
    network:
        interfaces:
            - bond:
                # The interfaces that make up the bond.
                interfaces:
                    - enp2s0
                    - enp2s1
                mode: 802.3ad # A bond option.
                lacpRate: fast # A bond option.

                # # Picks a network device using the selector.

                # # select a device with bus prefix 00:*, a device with mac address matching `*:f0:ab` and `virtio` kernel driver.
                # deviceSelectors:
                #     - busPath: 00:* # PCI, USB bus prefix, supports matching by wildcard.
                #     - hardwareAddr: '*:f0:ab' # Device hardware (MAC) address, supports matching by wildcard.
                #       driver: virtio_net # Kernel driver, supports matching by wildcard.
```


| Field | Type | Description | Value(s) |
|-------|------|-------------|----------|
|`interfaces` |[]string |The interfaces that make up the bond.  | |
|`deviceSelectors` |<a href="#Config.machine.network.interfaces..bond.deviceSelectors.">[]NetworkDeviceSelector</a> |Picks a network device using the selector.<br />Mutually exclusive with `interfaces`.<br />Supports partial match using wildcard syntax. <Accordion title="Show example(s)">`deviceSelectors:\n    - busPath: 00:* # PCI, USB bus prefix, supports matching by wildcard.\n    - hardwareAddr: '*:f0:ab' # Device hardware (MAC) address, supports matching by wildcard.\n      driver: virtio_net # Kernel driver, supports matching by wildcard.`</Accordion> | |
|`arpIPTarget` |[]string |A bond option.<br />Please see the official kernel documentation.<br />Not supported at the moment.  | |
|`mode` |string |A bond option.<br />Please see the official kernel documentation.  | |
|`xmitHashPolicy` |string |A bond option.<br />Please see the official kernel documentation.  | |
|`lacpRate` |string |A bond option.<br />Please see the official kernel documentation.  | |
|`adActorSystem` |string |A bond option.<br />Please see the official kernel documentation.<br />Not supported at the moment.  | |
|`arpValidate` |string |A bond option.<br />Please see the official kernel documentation.  | |
|`arpAllTargets` |string |A bond option.<br />Please see the official kernel documentation.  | |
|`primary` |string |A bond option.<br />Please see the official kernel documentation.  | |
|`primaryReselect` |string |A bond option.<br />Please see the official kernel documentation.  | |
|`failOverMac` |string |A bond option.<br />Please see the official kernel documentation.  | |
|`adSelect` |string |A bond option.<br />Please see the official kernel documentation.  | |
|`miimon` |uint32 |A bond option.<br />Please see the official kernel documentation.  | |
|`updelay` |uint32 |A bond option.<br />Please see the official kernel documentation.  | |
|`downdelay` |uint32 |A bond option.<br />Please see the official kernel documentation.  | |
|`arpInterval` |uint32 |A bond option.<br />Please see the official kernel documentation.  | |
|`resendIgmp` |uint32 |A bond option.<br />Please see the official kernel documentation.  | |
|`minLinks` |uint32 |A bond option.<br />Please see the official kernel documentation.  | |
|`lpInterval` |uint32 |A bond option.<br />Please see the official kernel documentation.  | |
|`packetsPerSlave` |uint32 |A bond option.<br />Please see the official kernel documentation.  | |
|`numPeerNotif` |uint8 |A bond option.<br />Please see the official kernel documentation.  | |
|`tlbDynamicLb` |uint8 |A bond option.<br />Please see the official kernel documentation.  | |
|`allSlavesActive` |uint8 |A bond option.<br />Please see the official kernel documentation.  | |
|`useCarrier` |bool |A bond option.<br />Please see the official kernel documentation.  | |
|`adActorSysPrio` |uint16 |A bond option.<br />Please see the official kernel documentation.  | |
|`adUserPortKey` |uint16 |A bond option.<br />Please see the official kernel documentation.  | |
|`peerNotifyDelay` |uint32 |A bond option.<br />Please see the official kernel documentation.  | |




###### deviceSelectors[]

NetworkDeviceSelector struct describes network device selector.



```yaml
machine:
    network:
        interfaces:
            - bond:
                deviceSelectors:
                    busPath: 00:* # PCI, USB bus prefix, supports matching by wildcard.
```

```yaml
machine:
    network:
        interfaces:
            - bond:
                deviceSelectors:
                    hardwareAddr: '*:f0:ab' # Device hardware (MAC) address, supports matching by wildcard.
                    driver: virtio_net # Kernel driver, supports matching by wildcard.
```

```yaml
machine:
    network:
        interfaces:
            - bond:
                deviceSelectors:
                    - busPath: 00:* # PCI, USB bus prefix, supports matching by wildcard.
                    - hardwareAddr: '*:f0:ab' # Device hardware (MAC) address, supports matching by wildcard.
                      driver: virtio_net # Kernel driver, supports matching by wildcard.
```


| Field | Type | Description | Value(s) |
|-------|------|-------------|----------|
|`busPath` |string |PCI, USB bus prefix, supports matching by wildcard.  | |
|`hardwareAddr` |string |Device hardware (MAC) address, supports matching by wildcard.  | |
|`permanentAddr` |string |Device permanent hardware address, supports matching by wildcard.<br />The permanent address doesn't change when the link is enslaved to a bond,<br />so it's recommended to use this field for bond members.  | |
|`pciID` |string |PCI ID (vendor ID, product ID), supports matching by wildcard.  | |
|`driver` |string |Kernel driver, supports matching by wildcard.  | |
|`physical` |bool |Select only physical devices.  | |








##### bridge

Bridge contains the various options for configuring a bridge interface.



```yaml
machine:
    network:
        interfaces:
            - bridge:
                # The interfaces that make up the bridge.
                interfaces:
                    - enxda4042ca9a51
                    - enxae2a6774c259
                # Enable STP on this bridge.
                stp:
                    enabled: true # Whether Spanning Tree Protocol (STP) is enabled.
```


| Field | Type | Description | Value(s) |
|-------|------|-------------|----------|
|`interfaces` |[]string |The interfaces that make up the bridge.  | |
|`stp` |<a href="#Config.machine.network.interfaces..bridge.stp">STP</a> |Enable STP on this bridge.<br />Please see the official kernel documentation.  | |
|`vlan` |<a href="#Config.machine.network.interfaces..bridge.vlan">BridgeVLAN</a> |Enable VLAN-awareness on this bridge.<br />Please see the official kernel documentation.  | |




###### stp

STP contains the various options for configuring the STP properties of a bridge interface.




| Field | Type | Description | Value(s) |
|-------|------|-------------|----------|
|`enabled` |bool |Whether Spanning Tree Protocol (STP) is enabled.  | |






###### vlan

BridgeVLAN contains the various options for configuring the VLAN properties of a bridge interface.




| Field | Type | Description | Value(s) |
|-------|------|-------------|----------|
|`vlanFiltering` |bool |Whether VLAN filtering is enabled.  | |








##### bridgePort

BridgePort contains settings for assigning a link to a bridge interface.



```yaml
machine:
    network:
        interfaces:
            - bridgePort:
                master: br0 # The name of the bridge master interface
```


| Field | Type | Description | Value(s) |
|-------|------|-------------|----------|
|`master` |string |The name of the bridge master interface  | |






##### vlans[]

Vlan represents vlan settings for a device.




| Field | Type | Description | Value(s) |
|-------|------|-------------|----------|
|`addresses` |[]string |The addresses in CIDR notation or as plain IPs to use.  | |
|`routes` |<a href="#Config.machine.network.interfaces..vlans..routes.">[]Route</a> |A list of routes associated with the VLAN.  | |
|`dhcp` |bool |Indicates if DHCP should be used.  | |
|`vlanId` |uint16 |The VLAN's ID.  | |
|`mtu` |uint32 |The VLAN's MTU.  | |
|`vip` |<a href="#Config.machine.network.interfaces..vlans..vip">DeviceVIPConfig</a> |The VLAN's virtual IP address configuration.  | |
|`dhcpOptions` |<a href="#Config.machine.network.interfaces..vlans..dhcpOptions">DHCPOptions</a> |DHCP specific options.<br />`dhcp` *must* be set to true for these to take effect.  | |




###### routes[]

Route represents a network route.



```yaml
machine:
    network:
        interfaces:
            - vlans:
                - routes:
                    - network: 0.0.0.0/0 # The route's network (destination).
                      gateway: 10.5.0.1 # The route's gateway (if empty, creates link scope route).
                    - network: 10.2.0.0/16 # The route's network (destination).
                      gateway: 10.2.0.1 # The route's gateway (if empty, creates link scope route).
```


| Field | Type | Description | Value(s) |
|-------|------|-------------|----------|
|`network` |string |The route's network (destination).  | |
|`gateway` |string |The route's gateway (if empty, creates link scope route).  | |
|`source` |string |The route's source address (optional).  | |
|`metric` |uint32 |The optional metric for the route.  | |
|`mtu` |uint32 |The optional MTU for the route.  | |






###### vip

DeviceVIPConfig contains settings for configuring a Virtual Shared IP on an interface.



```yaml
machine:
    network:
        interfaces:
            - vlans:
                - vip:
                    ip: 172.16.199.55 # Specifies the IP address to be used.
```


| Field | Type | Description | Value(s) |
|-------|------|-------------|----------|
|`ip` |string |Specifies the IP address to be used.  | |
|`equinixMetal` |<a href="#Config.machine.network.interfaces..vlans..vip.equinixMetal">VIPEquinixMetalConfig</a> |Specifies the Equinix Metal API settings to assign VIP to the node.  | |
|`hcloud` |<a href="#Config.machine.network.interfaces..vlans..vip.hcloud">VIPHCloudConfig</a> |Specifies the Hetzner Cloud API settings to assign VIP to the node.  | |




###### equinixMetal

VIPEquinixMetalConfig contains settings for Equinix Metal VIP management.




| Field | Type | Description | Value(s) |
|-------|------|-------------|----------|
|`apiToken` |string |Specifies the Equinix Metal API Token.  | |






###### hcloud

VIPHCloudConfig contains settings for Hetzner Cloud VIP management.




| Field | Type | Description | Value(s) |
|-------|------|-------------|----------|
|`apiToken` |string |Specifies the Hetzner Cloud API Token.  | |








###### dhcpOptions

DHCPOptions contains options for configuring the DHCP settings for a given interface.



```yaml
machine:
    network:
        interfaces:
            - vlans:
                - dhcpOptions:
                    routeMetric: 1024 # The priority of all routes received via DHCP.
```


| Field | Type | Description | Value(s) |
|-------|------|-------------|----------|
|`routeMetric` |uint32 |The priority of all routes received via DHCP.  | |
|`ipv4` |bool |Enables DHCPv4 protocol for the interface (default is enabled).  | |
|`ipv6` |bool |Enables DHCPv6 protocol for the interface (default is disabled).  | |
|`duidv6` |string |Set client DUID (hex string).  | |








##### dhcpOptions

DHCPOptions contains options for configuring the DHCP settings for a given interface.



```yaml
machine:
    network:
        interfaces:
            - dhcpOptions:
                routeMetric: 1024 # The priority of all routes received via DHCP.
```


| Field | Type | Description | Value(s) |
|-------|------|-------------|----------|
|`routeMetric` |uint32 |The priority of all routes received via DHCP.  | |
|`ipv4` |bool |Enables DHCPv4 protocol for the interface (default is enabled).  | |
|`ipv6` |bool |Enables DHCPv6 protocol for the interface (default is disabled).  | |
|`duidv6` |string |Set client DUID (hex string).  | |






##### wireguard

DeviceWireguardConfig contains settings for configuring Wireguard network interface.



```yaml
machine:
    network:
        interfaces:
            - wireguard:
                privateKey: ABCDEF... # Specifies a private key configuration (base64 encoded).
                listenPort: 51111 # Specifies a device's listening port.
                # Specifies a list of peer configurations to apply to a device.
                peers:
                    - publicKey: ABCDEF... # Specifies the public key of this peer.
                      endpoint: 192.168.1.3 # Specifies the endpoint of this peer entry.
                      # AllowedIPs specifies a list of allowed IP addresses in CIDR notation for this peer.
                      allowedIPs:
                        - 192.168.1.0/24
```

```yaml
machine:
    network:
        interfaces:
            - wireguard:
                privateKey: ABCDEF... # Specifies a private key configuration (base64 encoded).
                # Specifies a list of peer configurations to apply to a device.
                peers:
                    - publicKey: ABCDEF... # Specifies the public key of this peer.
                      endpoint: 192.168.1.2:51822 # Specifies the endpoint of this peer entry.
                      persistentKeepaliveInterval: 10s # Specifies the persistent keepalive interval for this peer.
                      # AllowedIPs specifies a list of allowed IP addresses in CIDR notation for this peer.
                      allowedIPs:
                        - 192.168.1.0/24
```


| Field | Type | Description | Value(s) |
|-------|------|-------------|----------|
|`privateKey` |string |Specifies a private key configuration (base64 encoded).<br />Can be generated by `wg genkey`.  | |
|`listenPort` |int |Specifies a device's listening port.  | |
|`firewallMark` |int |Specifies a device's firewall mark.  | |
|`peers` |<a href="#Config.machine.network.interfaces..wireguard.peers.">[]DeviceWireguardPeer</a> |Specifies a list of peer configurations to apply to a device.  | |




###### peers[]

DeviceWireguardPeer a WireGuard device peer configuration.




| Field | Type | Description | Value(s) |
|-------|------|-------------|----------|
|`publicKey` |string |Specifies the public key of this peer.<br />Can be extracted from private key by running `wg pubkey {"<"} private.key {">"} public.key && cat public.key`.  | |
|`endpoint` |string |Specifies the endpoint of this peer entry.  | |
|`persistentKeepaliveInterval` |Duration |Specifies the persistent keepalive interval for this peer.<br />Field format accepts any Go time.Duration format ('1h' for one hour, '10m' for ten minutes).  | |
|`allowedIPs` |[]string |AllowedIPs specifies a list of allowed IP addresses in CIDR notation for this peer.  | |








##### vip

DeviceVIPConfig contains settings for configuring a Virtual Shared IP on an interface.



```yaml
machine:
    network:
        interfaces:
            - vip:
                ip: 172.16.199.55 # Specifies the IP address to be used.
```


| Field | Type | Description | Value(s) |
|-------|------|-------------|----------|
|`ip` |string |Specifies the IP address to be used.  | |
|`equinixMetal` |<a href="#Config.machine.network.interfaces..vip.equinixMetal">VIPEquinixMetalConfig</a> |Specifies the Equinix Metal API settings to assign VIP to the node.  | |
|`hcloud` |<a href="#Config.machine.network.interfaces..vip.hcloud">VIPHCloudConfig</a> |Specifies the Hetzner Cloud API settings to assign VIP to the node.  | |




###### equinixMetal

VIPEquinixMetalConfig contains settings for Equinix Metal VIP management.




| Field | Type | Description | Value(s) |
|-------|------|-------------|----------|
|`apiToken` |string |Specifies the Equinix Metal API Token.  | |






###### hcloud

VIPHCloudConfig contains settings for Hetzner Cloud VIP management.




| Field | Type | Description | Value(s) |
|-------|------|-------------|----------|
|`apiToken` |string |Specifies the Hetzner Cloud API Token.  | |










#### extraHostEntries[]

ExtraHost represents a host entry in /etc/hosts.



```yaml
machine:
    network:
        extraHostEntries:
            - ip: 192.168.1.100 # The IP of the host.
              # The host alias.
              aliases:
                - example
                - example.domain.tld
```


| Field | Type | Description | Value(s) |
|-------|------|-------------|----------|
|`ip` |string |The IP of the host.  | |
|`aliases` |[]string |The host alias.  | |






#### kubespan

NetworkKubeSpan struct describes KubeSpan configuration.



```yaml
machine:
    network:
        kubespan:
            enabled: true # Enable the KubeSpan feature.
```


| Field | Type | Description | Value(s) |
|-------|------|-------------|----------|
|`enabled` |bool |Enable the KubeSpan feature.<br />Cluster discovery should be enabled with .cluster.discovery.enabled for KubeSpan to be enabled.  | |
|`advertiseKubernetesNetworks` |bool |Control whether Kubernetes pod CIDRs are announced over KubeSpan from the node.<br />If disabled, CNI handles encapsulating pod-to-pod traffic into some node-to-node tunnel,<br />and KubeSpan handles the node-to-node traffic.<br />If enabled, KubeSpan will take over pod-to-pod traffic and send it over KubeSpan directly.<br />When enabled, KubeSpan should have a way to detect complete pod CIDRs of the node which<br />is not always the case with CNIs not relying on Kubernetes for IPAM.  | |
|`allowDownPeerBypass` |bool |Skip sending traffic via KubeSpan if the peer connection state is not up.<br />This provides configurable choice between connectivity and security: either traffic is always<br />forced to go via KubeSpan (even if Wireguard peer connection is not up), or traffic can go directly<br />to the peer if Wireguard connection can't be established.  | |
|`harvestExtraEndpoints` |bool |KubeSpan can collect and publish extra endpoints for each member of the cluster<br />based on Wireguard endpoint information for each peer.<br />This feature is disabled by default, don't enable it<br />with high number of peers (>50) in the KubeSpan network (performance issues).  | |
|`mtu` |uint32 |KubeSpan link MTU size.<br />Default value is 1420.  | |
|`filters` |<a href="#Config.machine.network.kubespan.filters">KubeSpanFilters</a> |KubeSpan advanced filtering of network addresses .<br /><br />Settings in this section are optional, and settings apply only to the node.  | |




##### filters

KubeSpanFilters struct describes KubeSpan advanced network addresses filtering.




| Field | Type | Description | Value(s) |
|-------|------|-------------|----------|
|`endpoints` |[]string |Filter node addresses which will be advertised as KubeSpan endpoints for peer-to-peer Wireguard connections.<br /><br />By default, all addresses are advertised, and KubeSpan cycles through all endpoints until it finds one that works.<br /><br />Default value: no filtering. <Accordion title="Show example(s)">`endpoints:\n    - 0.0.0.0/0\n    - '!192.168.0.0/16'\n    - ::/0`</Accordion> | |










### install

InstallConfig represents the installation options for preparing a node.



```yaml
machine:
    install:
        disk: /dev/sda # The disk used for installations.
        # Allows for supplying extra kernel args via the bootloader.
        extraKernelArgs:
            - console=ttyS1
            - panic=10
        image: ghcr.io/siderolabs/installer:latest # Allows for supplying the image used to perform the installation.
        wipe: false # Indicates if the installation disk should be wiped at installation time.

        # # Look up disk using disk attributes like model, size, serial and others.
        # diskSelector:
        #     size: 4GB # Disk size.
        #     model: WDC* # Disk model `/sys/block/{"<"}dev{">"}/device/model`.
        #     busPath: /pci0000:00/0000:00:17.0/ata1/host0/target0:0:0/0:0:0:0 # Disk bus path.
```


| Field | Type | Description | Value(s) |
|-------|------|-------------|----------|
|`disk` |string |The disk used for installations. <Accordion title="Show example(s)">`disk: /dev/sda`<br />`disk: /dev/nvme0`</Accordion> | |
|`diskSelector` |<a href="#Config.machine.install.diskSelector">InstallDiskSelector</a> |Look up disk using disk attributes like model, size, serial and others.<br />Always has priority over `disk`. <Accordion title="Show example(s)">`diskSelector:\n    size: '\>= 1TB' # Disk size.\n    model: WDC* # Disk model `/sys/block/\<dev\>/device/model`.\n\n    # # Disk bus path.\n    # busPath: /pci0000:00/0000:00:17.0/ata1/host0/target0:0:0/0:0:0:0\n    # busPath: /pci0000:00/*`</Accordion> | |
|`extraKernelArgs` |[]string |Allows for supplying extra kernel args via the bootloader.<br />Existing kernel args can be removed by prefixing the argument with a `-`.<br />For example `-console` removes all `console=<value>` arguments, whereas `-console=tty0` removes the `console=tty0` default argument.<br />If Talos is using systemd-boot as a bootloader (default for UEFI) this setting will be ignored. <Accordion title="Show example(s)">`extraKernelArgs:\n    - talos.platform=metal\n    - reboot=k`</Accordion> | |
|`image` |string |Allows for supplying the image used to perform the installation.<br />Image reference for each Talos release can be found on<br />[GitHub releases page](https://github.com/siderolabs/talos/releases). <Accordion title="Show example(s)">`image: ghcr.io/siderolabs/installer:latest`</Accordion> | |
|`wipe` |bool |Indicates if the installation disk should be wiped at installation time.<br />Defaults to `true`.  |`true`<br />`yes`<br />`false`<br />`no`<br /> |
|`legacyBIOSSupport` |bool |Indicates if MBR partition should be marked as bootable (active).<br />Should be enabled only for the systems with legacy BIOS that doesn't support GPT partitioning scheme.  | |




#### diskSelector

InstallDiskSelector represents a disk query parameters for the install disk lookup.



```yaml
machine:
    install:
        diskSelector:
            size: '>= 1TB' # Disk size.
            model: WDC* # Disk model `/sys/block/{"<"}dev{">"}/device/model`.

            # # Disk bus path.
            # busPath: /pci0000:00/0000:00:17.0/ata1/host0/target0:0:0/0:0:0:0
            # busPath: /pci0000:00/*
```


| Field | Type | Description | Value(s) |
|-------|------|-------------|----------|
|`size` |InstallDiskSizeMatcher |Disk size. <Accordion title="Show example(s)">`size: 4GB`<br />`size: '\> 1TB'`<br />`size: \<= 2TB`</Accordion> | |
|`name` |string |Disk name `/sys/block/{"<"}dev{">"}/device/name`.  | |
|`model` |string |Disk model `/sys/block/{"<"}dev{">"}/device/model`.  | |
|`serial` |string |Disk serial number `/sys/block/{"<"}dev{">"}/serial`.  | |
|`modalias` |string |Disk modalias `/sys/block/{"<"}dev{">"}/device/modalias`.  | |
|`uuid` |string |Disk UUID `/sys/block/{"<"}dev{">"}/uuid`.  | |
|`wwid` |string |Disk WWID `/sys/block/{"<"}dev{">"}/wwid`.  | |
|`type` |InstallDiskType |Disk Type.  |`ssd`<br />`hdd`<br />`nvme`<br />`sd`<br /> |
|`busPath` |string |Disk bus path. <Accordion title="Show example(s)">`busPath: /pci0000:00/0000:00:17.0/ata1/host0/target0:0:0/0:0:0:0`<br />`busPath: /pci0000:00/*`</Accordion> | |








### files[]

MachineFile represents a file to write to disk.



```yaml
machine:
    files:
        - content: '...' # The contents of the file.
          permissions: 0o666 # The file's permissions in octal.
          path: /tmp/file.txt # The path of the file.
          op: append # The operation to use
```


| Field | Type | Description | Value(s) |
|-------|------|-------------|----------|
|`content` |string |The contents of the file.  | |
|`permissions` |FileMode |The file's permissions in octal.  | |
|`path` |string |The path of the file.  | |
|`op` |string |The operation to use  |`create`<br />`append`<br />`overwrite`<br /> |






### time

TimeConfig represents the options for configuring time on a machine.



```yaml
machine:
    time:
        disabled: false # Indicates if the time service is disabled for the machine.
        # description: |
        servers:
            - time.cloudflare.com
        bootTimeout: 2m0s # Specifies the timeout when the node time is considered to be in sync unlocking the boot sequence.
```


| Field | Type | Description | Value(s) |
|-------|------|-------------|----------|
|`disabled` |bool |Indicates if the time service is disabled for the machine.<br />Defaults to `false`.  | |
|`servers` |[]string |description: |<br />    Specifies time (NTP) servers to use for setting the system time.<br />    Defaults to `time.cloudflare.com`.<br /><br />   Talos can also sync to the PTP time source (e.g provided by the hypervisor),<br />    provide the path to the PTP device as "/dev/ptp0" or "/dev/ptp_kvm".<br />  | |
|`bootTimeout` |Duration |Specifies the timeout when the node time is considered to be in sync unlocking the boot sequence.<br />NTP sync will be still running in the background.<br />Defaults to "infinity" (waiting forever for time sync)  | |






### registries

RegistriesConfig represents the image pull options.



```yaml
machine:
    registries:
        # Specifies mirror configuration for each registry host namespace.
        mirrors:
            docker.io:
                # List of endpoints (URLs) for registry mirrors to use.
                endpoints:
                    - https://registry.local
        # Specifies TLS & auth configuration for HTTPS image registries.
        config:
            registry.local:
                # The TLS configuration for the registry.
                tls:
                    # Enable mutual TLS authentication with the registry.
                    clientIdentity:
                        crt: LS0tIEVYQU1QTEUgQ0VSVElGSUNBVEUgLS0t
                        key: LS0tIEVYQU1QTEUgS0VZIC0tLQ==
                # The auth configuration for this registry.
                auth:
                    username: username # Optional registry authentication.
                    password: password # Optional registry authentication.
```


| Field | Type | Description | Value(s) |
|-------|------|-------------|----------|
|`mirrors` |<a href="#Config.machine.registries.mirrors.-">map[string]RegistryMirrorConfig</a> |Specifies mirror configuration for each registry host namespace.<br />This setting allows to configure local pull-through caching registires,<br />air-gapped installations, etc.<br /><br />For example, when pulling an image with the reference `example.com:123/image:v1`,<br />the `example.com:123` key will be used to lookup the mirror configuration.<br /><br />Optionally the `*` key can be used to configure a fallback mirror.<br /><br />Registry name is the first segment of image identifier, with 'docker.io'<br />being default one. <Accordion title="Show example(s)">`mirrors:\n    ghcr.io:\n        # List of endpoints (URLs) for registry mirrors to use.\n        endpoints:\n            - https://registry.insecure\n            - https://ghcr.io/v2/`</Accordion> | |
|`config` |<a href="#Config.machine.registries.config.-">map[string]RegistryConfig</a> |Specifies TLS & auth configuration for HTTPS image registries.<br />Mutual TLS can be enabled with 'clientIdentity' option.<br /><br />The full hostname and port (if not using a default port 443)<br />should be used as the key.<br />The fallback key `*` can't be used for TLS configuration.<br /><br />TLS configuration can be skipped if registry has trusted<br />server certificate. <Accordion title="Show example(s)">`config:\n    registry.insecure:\n        # The TLS configuration for the registry.\n        tls:\n            insecureSkipVerify: true # Skip TLS server certificate verification (not recommended).\n\n            # # Enable mutual TLS authentication with the registry.\n            # clientIdentity:\n            #     crt: LS0tIEVYQU1QTEUgQ0VSVElGSUNBVEUgLS0t\n            #     key: LS0tIEVYQU1QTEUgS0VZIC0tLQ==\n\n        # # The auth configuration for this registry.\n        # auth:\n        #     username: username # Optional registry authentication.\n        #     password: password # Optional registry authentication.`</Accordion> | |




#### mirrors.*

RegistryMirrorConfig represents mirror configuration for a registry.



```yaml
machine:
    registries:
        mirrors:
            ghcr.io:
                # List of endpoints (URLs) for registry mirrors to use.
                endpoints:
                    - https://registry.insecure
                    - https://ghcr.io/v2/
```


| Field | Type | Description | Value(s) |
|-------|------|-------------|----------|
|`endpoints` |[]string |List of endpoints (URLs) for registry mirrors to use.<br />Endpoint configures HTTP/HTTPS access mode, host name,<br />port and path (if path is not set, it defaults to `/v2`).  | |
|`overridePath` |bool |Use the exact path specified for the endpoint (don't append /v2/).<br />This setting is often required for setting up multiple mirrors<br />on a single instance of a registry.  | |
|`skipFallback` |bool |Skip fallback to the upstream endpoint, for example the mirror configuration<br />for `docker.io` will not fallback to `registry-1.docker.io`.  | |






#### config.*

RegistryConfig specifies auth & TLS config per registry.



```yaml
machine:
    registries:
        config:
            registry.insecure:
                # The TLS configuration for the registry.
                tls:
                    insecureSkipVerify: true # Skip TLS server certificate verification (not recommended).

                    # # Enable mutual TLS authentication with the registry.
                    # clientIdentity:
                    #     crt: LS0tIEVYQU1QTEUgQ0VSVElGSUNBVEUgLS0t
                    #     key: LS0tIEVYQU1QTEUgS0VZIC0tLQ==

                # # The auth configuration for this registry.
                # auth:
                #     username: username # Optional registry authentication.
                #     password: password # Optional registry authentication.
```


| Field | Type | Description | Value(s) |
|-------|------|-------------|----------|
|`tls` |<a href="#Config.machine.registries.config.-.tls">RegistryTLSConfig</a> |The TLS configuration for the registry. <Accordion title="Show example(s)">`tls:\n    # Enable mutual TLS authentication with the registry.\n    clientIdentity:\n        crt: LS0tIEVYQU1QTEUgQ0VSVElGSUNBVEUgLS0t\n        key: LS0tIEVYQU1QTEUgS0VZIC0tLQ==`<br />`tls:\n    insecureSkipVerify: true # Skip TLS server certificate verification (not recommended).\n\n    # # Enable mutual TLS authentication with the registry.\n    # clientIdentity:\n    #     crt: LS0tIEVYQU1QTEUgQ0VSVElGSUNBVEUgLS0t\n    #     key: LS0tIEVYQU1QTEUgS0VZIC0tLQ==`</Accordion> | |
|`auth` |<a href="#Config.machine.registries.config.-.auth">RegistryAuthConfig</a> |The auth configuration for this registry.<br />Note: changes to the registry auth will not be picked up by the CRI containerd plugin without a reboot. <Accordion title="Show example(s)">`auth:\n    username: username # Optional registry authentication.\n    password: password # Optional registry authentication.`</Accordion> | |




##### tls

RegistryTLSConfig specifies TLS config for HTTPS registries.



```yaml
machine:
    registries:
        config:
            example.com:
                tls:
                    # Enable mutual TLS authentication with the registry.
                    clientIdentity:
                        crt: LS0tIEVYQU1QTEUgQ0VSVElGSUNBVEUgLS0t
                        key: LS0tIEVYQU1QTEUgS0VZIC0tLQ==
```

```yaml
machine:
    registries:
        config:
            example.com:
                tls:
                    insecureSkipVerify: true # Skip TLS server certificate verification (not recommended).

                    # # Enable mutual TLS authentication with the registry.
                    # clientIdentity:
                    #     crt: LS0tIEVYQU1QTEUgQ0VSVElGSUNBVEUgLS0t
                    #     key: LS0tIEVYQU1QTEUgS0VZIC0tLQ==
```


| Field | Type | Description | Value(s) |
|-------|------|-------------|----------|
|`clientIdentity` |PEMEncodedCertificateAndKey |Enable mutual TLS authentication with the registry.<br />Client certificate and key should be base64-encoded. <Accordion title="Show example(s)">`clientIdentity:\n    crt: LS0tIEVYQU1QTEUgQ0VSVElGSUNBVEUgLS0t\n    key: LS0tIEVYQU1QTEUgS0VZIC0tLQ==`</Accordion> | |
|`ca` |Base64Bytes |CA registry certificate to add the list of trusted certificates.<br />Certificate should be base64-encoded.  | |
|`insecureSkipVerify` |bool |Skip TLS server certificate verification (not recommended).  | |






##### auth

RegistryAuthConfig specifies authentication configuration for a registry.



```yaml
machine:
    registries:
        config:
            example.com:
                auth:
                    username: username # Optional registry authentication.
                    password: password # Optional registry authentication.
```


| Field | Type | Description | Value(s) |
|-------|------|-------------|----------|
|`username` |string |Optional registry authentication.<br />The meaning of each field is the same with the corresponding field in [`.docker/config.json`](https://docs.docker.com/engine/api/v1.41/#section/Authentication).  | |
|`password` |string |Optional registry authentication.<br />The meaning of each field is the same with the corresponding field in [`.docker/config.json`](https://docs.docker.com/engine/api/v1.41/#section/Authentication).  | |
|`auth` |string |Optional registry authentication.<br />The meaning of each field is the same with the corresponding field in [`.docker/config.json`](https://docs.docker.com/engine/api/v1.41/#section/Authentication).  | |
|`identityToken` |string |Optional registry authentication.<br />The meaning of each field is the same with the corresponding field in [`.docker/config.json`](https://docs.docker.com/engine/api/v1.41/#section/Authentication).  | |










### features

FeaturesConfig describes individual Talos features that can be switched on or off.



```yaml
machine:
    features:
        rbac: true # Enable role-based access control (RBAC).

        # # Configure Talos API access from Kubernetes pods.
        # kubernetesTalosAPIAccess:
        #     enabled: true # Enable Talos API access from Kubernetes pods.
        #     # The list of Talos API roles which can be granted for access from Kubernetes pods.
        #     allowedRoles:
        #         - os:reader
        #     # The list of Kubernetes namespaces Talos API access is available from.
        #     allowedKubernetesNamespaces:
        #         - kube-system
```


| Field | Type | Description | Value(s) |
|-------|------|-------------|----------|
|`rbac` |bool |Enable role-based access control (RBAC).  | |
|`stableHostname` |bool |Enable stable default hostname.  | |
|`kubernetesTalosAPIAccess` |<a href="#Config.machine.features.kubernetesTalosAPIAccess">KubernetesTalosAPIAccessConfig</a> |Configure Talos API access from Kubernetes pods.<br /><br />This feature is disabled if the feature config is not specified. <Accordion title="Show example(s)">`kubernetesTalosAPIAccess:\n    enabled: true # Enable Talos API access from Kubernetes pods.\n    # The list of Talos API roles which can be granted for access from Kubernetes pods.\n    allowedRoles:\n        - os:reader\n    # The list of Kubernetes namespaces Talos API access is available from.\n    allowedKubernetesNamespaces:\n        - kube-system`</Accordion> | |
|`apidCheckExtKeyUsage` |bool |Enable checks for extended key usage of client certificates in apid.  | |
|`diskQuotaSupport` |bool |Enable XFS project quota support for EPHEMERAL partition and user disks.<br />Also enables kubelet tracking of ephemeral disk usage in the kubelet via quota.  | |
|`kubePrism` |<a href="#Config.machine.features.kubePrism">KubePrism</a> |KubePrism - local proxy/load balancer on defined port that will distribute<br />requests to all API servers in the cluster.  | |
|`hostDNS` |<a href="#Config.machine.features.hostDNS">HostDNSConfig</a> |Configures host DNS caching resolver.  | |
|`imageCache` |<a href="#Config.machine.features.imageCache">ImageCacheConfig</a> |Enable Image Cache feature.  | |
|`nodeAddressSortAlgorithm` |string |Select the node address sort algorithm.<br />The 'v1' algorithm sorts addresses by the address itself.<br />The 'v2' algorithm prefers more specific prefixes.<br />If unset, defaults to 'v1'.  | |




#### kubernetesTalosAPIAccess

KubernetesTalosAPIAccessConfig describes the configuration for the Talos API access from Kubernetes pods.



```yaml
machine:
    features:
        kubernetesTalosAPIAccess:
            enabled: true # Enable Talos API access from Kubernetes pods.
            # The list of Talos API roles which can be granted for access from Kubernetes pods.
            allowedRoles:
                - os:reader
            # The list of Kubernetes namespaces Talos API access is available from.
            allowedKubernetesNamespaces:
                - kube-system
```


| Field | Type | Description | Value(s) |
|-------|------|-------------|----------|
|`enabled` |bool |Enable Talos API access from Kubernetes pods.  | |
|`allowedRoles` |[]string |The list of Talos API roles which can be granted for access from Kubernetes pods.<br /><br />Empty list means that no roles can be granted, so access is blocked.  | |
|`allowedKubernetesNamespaces` |[]string |The list of Kubernetes namespaces Talos API access is available from.  | |






#### kubePrism

KubePrism describes the configuration for the KubePrism load balancer.




| Field | Type | Description | Value(s) |
|-------|------|-------------|----------|
|`enabled` |bool |Enable KubePrism support - will start local load balancing proxy.  | |
|`port` |int |KubePrism port.  | |






#### hostDNS

HostDNSConfig describes the configuration for the host DNS resolver.




| Field | Type | Description | Value(s) |
|-------|------|-------------|----------|
|`enabled` |bool |Enable host DNS caching resolver.  | |
|`forwardKubeDNSToHost` |bool |Use the host DNS resolver as upstream for Kubernetes CoreDNS pods.<br /><br />When enabled, CoreDNS pods use host DNS server as the upstream DNS (instead of<br />using configured upstream DNS resolvers directly).  | |
|`resolveMemberNames` |bool |Resolve member hostnames using the host DNS resolver.<br /><br />When enabled, cluster member hostnames and node names are resolved using the host DNS resolver.<br />This requires service discovery to be enabled.  | |






#### imageCache

ImageCacheConfig describes the configuration for the Image Cache feature.




| Field | Type | Description | Value(s) |
|-------|------|-------------|----------|
|`localEnabled` |bool |Enable local image cache.  | |








### udev

UdevConfig describes how the udev system should be configured.



```yaml
machine:
    udev:
        # List of udev rules to apply to the udev system
        rules:
            - SUBSYSTEM=="drm", KERNEL=="renderD*", GROUP="44", MODE="0660"
```


| Field | Type | Description | Value(s) |
|-------|------|-------------|----------|
|`rules` |[]string |List of udev rules to apply to the udev system  | |






### logging

LoggingConfig struct configures Talos logging.



```yaml
machine:
    logging:
        # Logging destination.
        destinations:
            - endpoint: tcp://1.2.3.4:12345 # Where to send logs. Supported protocols are "tcp" and "udp".
              format: json_lines # Logs format.
```


| Field | Type | Description | Value(s) |
|-------|------|-------------|----------|
|`destinations` |<a href="#Config.machine.logging.destinations.">[]LoggingDestination</a> |Logging destination.  | |




#### destinations[]

LoggingDestination struct configures Talos logging destination.




| Field | Type | Description | Value(s) |
|-------|------|-------------|----------|
|`endpoint` |<a href="#Config.machine.logging.destinations..endpoint">Endpoint</a> |Where to send logs. Supported protocols are "tcp" and "udp". <Accordion title="Show example(s)">`endpoint: udp://127.0.0.1:12345`<br />`endpoint: tcp://1.2.3.4:12345`</Accordion> | |
|`format` |string |Logs format.  |`json_lines`<br /> |
|`extraTags` |map[string]string |Extra tags (key-value) pairs to attach to every log message sent.  | |




##### endpoint

Endpoint represents the endpoint URL parsed out of the machine config.



```yaml
machine:
    logging:
        destinations:
            - endpoint: https://1.2.3.4:6443
```

```yaml
machine:
    logging:
        destinations:
            - endpoint: https://cluster1.internal:6443
```

```yaml
machine:
    logging:
        destinations:
            - endpoint: udp://127.0.0.1:12345
```

```yaml
machine:
    logging:
        destinations:
            - endpoint: tcp://1.2.3.4:12345
```


| Field | Type | Description | Value(s) |
|-------|------|-------------|----------|










### kernel

KernelConfig struct configures Talos Linux kernel.



```yaml
machine:
    kernel:
        # Kernel modules to load.
        modules:
            - name: brtfs # Module name.
```


| Field | Type | Description | Value(s) |
|-------|------|-------------|----------|
|`modules` |<a href="#Config.machine.kernel.modules.">[]KernelModuleConfig</a> |Kernel modules to load.  | |




#### modules[]

KernelModuleConfig struct configures Linux kernel modules to load.




| Field | Type | Description | Value(s) |
|-------|------|-------------|----------|
|`name` |string |Module name.  | |
|`parameters` |[]string |Module parameters, changes applied after reboot.  | |








### seccompProfiles[]

MachineSeccompProfile defines seccomp profiles for the machine.



```yaml
machine:
    seccompProfiles:
        - name: audit.json # The `name` field is used to provide the file name of the seccomp profile.
          # The `value` field is used to provide the seccomp profile.
          value:
            defaultAction: SCMP_ACT_LOG
```


| Field | Type | Description | Value(s) |
|-------|------|-------------|----------|
|`name` |string |The `name` field is used to provide the file name of the seccomp profile.  | |
|`value` |Unstructured |The `value` field is used to provide the seccomp profile.  | |








## cluster

ClusterConfig represents the cluster-wide config values.



```yaml
cluster:
    # ControlPlaneConfig represents the control plane configuration options.
    controlPlane:
        endpoint: https://1.2.3.4 # Endpoint is the canonical controlplane endpoint, which can be an IP address or a DNS hostname.
        localAPIServerPort: 443 # The port that the API server listens on internally.
    clusterName: talos.local
    # ClusterNetworkConfig represents kube networking configuration options.
    network:
        # The CNI used.
        cni:
            name: flannel # Name of CNI to use.
        dnsDomain: cluster.local # The domain used by Kubernetes DNS.
        # The pod subnet CIDR.
        podSubnets:
            - 10.244.0.0/16
        # The service subnet CIDR.
        serviceSubnets:
            - 10.96.0.0/12
```


| Field | Type | Description | Value(s) |
|-------|------|-------------|----------|
|`id` |string |Globally unique identifier for this cluster (base64 encoded random 32 bytes).  | |
|`secret` |string |Shared secret of cluster (base64 encoded random 32 bytes).<br />This secret is shared among cluster members but should never be sent over the network.  | |
|`controlPlane` |<a href="#Config.cluster.controlPlane">ControlPlaneConfig</a> |Provides control plane specific configuration options. <Accordion title="Show example(s)">`controlPlane:\n    endpoint: https://1.2.3.4 # Endpoint is the canonical controlplane endpoint, which can be an IP address or a DNS hostname.\n    localAPIServerPort: 443 # The port that the API server listens on internally.`</Accordion> | |
|`clusterName` |string |Configures the cluster's name.  | |
|`network` |<a href="#Config.cluster.network">ClusterNetworkConfig</a> |Provides cluster specific network configuration options. <Accordion title="Show example(s)">`network:\n    # The CNI used.\n    cni:\n        name: flannel # Name of CNI to use.\n    dnsDomain: cluster.local # The domain used by Kubernetes DNS.\n    # The pod subnet CIDR.\n    podSubnets:\n        - 10.244.0.0/16\n    # The service subnet CIDR.\n    serviceSubnets:\n        - 10.96.0.0/12`</Accordion> | |
|`token` |string |The [bootstrap token](https://kubernetes.io/docs/reference/access-authn-authz/bootstrap-tokens/) used to join the cluster. <Accordion title="Show example(s)">`token: wlzjyw.bei2zfylhs2by0wd`</Accordion> | |
|`aescbcEncryptionSecret` |string |A key used for the [encryption of secret data at rest](https://kubernetes.io/docs/tasks/administer-cluster/encrypt-data/).<br />Enables encryption with AESCBC. <Accordion title="Show example(s)">`aescbcEncryptionSecret: z01mye6j16bspJYtTB/5SFX8j7Ph4JXxM2Xuu4vsBPM=`</Accordion> | |
|`secretboxEncryptionSecret` |string |A key used for the [encryption of secret data at rest](https://kubernetes.io/docs/tasks/administer-cluster/encrypt-data/).<br />Enables encryption with secretbox.<br />Secretbox has precedence over AESCBC. <Accordion title="Show example(s)">`secretboxEncryptionSecret: z01mye6j16bspJYtTB/5SFX8j7Ph4JXxM2Xuu4vsBPM=`</Accordion> | |
|`ca` |PEMEncodedCertificateAndKey |The base64 encoded root certificate authority used by Kubernetes. <Accordion title="Show example(s)">`ca:\n    crt: LS0tIEVYQU1QTEUgQ0VSVElGSUNBVEUgLS0t\n    key: LS0tIEVYQU1QTEUgS0VZIC0tLQ==`</Accordion> | |
|`acceptedCAs` |[]PEMEncodedCertificate |The list of base64 encoded accepted certificate authorities used by Kubernetes.  | |
|`aggregatorCA` |PEMEncodedCertificateAndKey |The base64 encoded aggregator certificate authority used by Kubernetes for front-proxy certificate generation.<br /><br />This CA can be self-signed. <Accordion title="Show example(s)">`aggregatorCA:\n    crt: LS0tIEVYQU1QTEUgQ0VSVElGSUNBVEUgLS0t\n    key: LS0tIEVYQU1QTEUgS0VZIC0tLQ==`</Accordion> | |
|`serviceAccount` |PEMEncodedKey |The base64 encoded private key for service account token generation. <Accordion title="Show example(s)">`serviceAccount:\n    key: LS0tIEVYQU1QTEUgS0VZIC0tLQ==`</Accordion> | |
|`apiServer` |<a href="#Config.cluster.apiServer">APIServerConfig</a> |API server specific configuration options. <Accordion title="Show example(s)">`apiServer:\n    image: registry.k8s.io/kube-apiserver:v1.34.1 # The container image used in the API server manifest.\n    # Extra arguments to supply to the API server.\n    extraArgs:\n        feature-gates: ServerSideApply=true\n        http2-max-streams-per-connection: "32"\n    # Extra certificate subject alternative names for the API server's certificate.\n    certSANs:\n        - 1.2.3.4\n        - 4.5.6.7\n\n    # # Configure the API server admission plugins.\n    # admissionControl:\n    #     - name: PodSecurity # Name is the name of the admission controller.\n    #       # Configuration is an embedded configuration object to be used as the plugin's\n    #       configuration:\n    #         apiVersion: pod-security.admission.config.k8s.io/v1alpha1\n    #         defaults:\n    #             audit: restricted\n    #             audit-version: latest\n    #             enforce: baseline\n    #             enforce-version: latest\n    #             warn: restricted\n    #             warn-version: latest\n    #         exemptions:\n    #             namespaces:\n    #                 - kube-system\n    #             runtimeClasses: []\n    #             usernames: []\n    #         kind: PodSecurityConfiguration\n\n    # # Configure the API server audit policy.\n    # auditPolicy:\n    #     apiVersion: audit.k8s.io/v1\n    #     kind: Policy\n    #     rules:\n    #         - level: Metadata\n\n    # # Configure the API server authorization config. Node and RBAC authorizers are always added irrespective of the configuration.\n    # authorizationConfig:\n    #     - type: Webhook # Type is the name of the authorizer. Allowed values are `Node`, `RBAC`, and `Webhook`.\n    #       name: webhook # Name is used to describe the authorizer.\n    #       # webhook is the configuration for the webhook authorizer.\n    #       webhook:\n    #         connectionInfo:\n    #             type: InClusterConfig\n    #         failurePolicy: Deny\n    #         matchConditionSubjectAccessReviewVersion: v1\n    #         matchConditions:\n    #             - expression: has(request.resourceAttributes)\n    #             - expression: '!(\''system:serviceaccounts:kube-system\'' in request.groups)'\n    #         subjectAccessReviewVersion: v1\n    #         timeout: 3s\n    #     - type: Webhook # Type is the name of the authorizer. Allowed values are `Node`, `RBAC`, and `Webhook`.\n    #       name: in-cluster-authorizer # Name is used to describe the authorizer.\n    #       # webhook is the configuration for the webhook authorizer.\n    #       webhook:\n    #         connectionInfo:\n    #             type: InClusterConfig\n    #         failurePolicy: NoOpinion\n    #         matchConditionSubjectAccessReviewVersion: v1\n    #         subjectAccessReviewVersion: v1\n    #         timeout: 3s`</Accordion> | |
|`controllerManager` |<a href="#Config.cluster.controllerManager">ControllerManagerConfig</a> |Controller manager server specific configuration options. <Accordion title="Show example(s)">`controllerManager:\n    image: registry.k8s.io/kube-controller-manager:v1.34.1 # The container image used in the controller manager manifest.\n    # Extra arguments to supply to the controller manager.\n    extraArgs:\n        feature-gates: ServerSideApply=true`</Accordion> | |
|`proxy` |<a href="#Config.cluster.proxy">ProxyConfig</a> |Kube-proxy server-specific configuration options <Accordion title="Show example(s)">`proxy:\n    image: registry.k8s.io/kube-proxy:v1.34.1 # The container image used in the kube-proxy manifest.\n    mode: ipvs # proxy mode of kube-proxy.\n    # Extra arguments to supply to kube-proxy.\n    extraArgs:\n        proxy-mode: iptables\n\n    # # Disable kube-proxy deployment on cluster bootstrap.\n    # disabled: false`</Accordion> | |
|`scheduler` |<a href="#Config.cluster.scheduler">SchedulerConfig</a> |Scheduler server specific configuration options. <Accordion title="Show example(s)">`scheduler:\n    image: registry.k8s.io/kube-scheduler:v1.34.1 # The container image used in the scheduler manifest.\n    # Extra arguments to supply to the scheduler.\n    extraArgs:\n        feature-gates: AllBeta=true`</Accordion> | |
|`discovery` |<a href="#Config.cluster.discovery">ClusterDiscoveryConfig</a> |Configures cluster member discovery. <Accordion title="Show example(s)">`discovery:\n    enabled: true # Enable the cluster membership discovery feature.\n    # Configure registries used for cluster member discovery.\n    registries:\n        # Kubernetes registry uses Kubernetes API server to discover cluster members and stores additional information\n        kubernetes: {}\n        # Service registry is using an external service to push and pull information about cluster members.\n        service:\n            endpoint: https://discovery.talos.dev/ # External service endpoint.`</Accordion> | |
|`etcd` |<a href="#Config.cluster.etcd">EtcdConfig</a> |Etcd specific configuration options. <Accordion title="Show example(s)">`etcd:\n    image: gcr.io/etcd-development/etcd:v3.6.4 # The container image used to create the etcd service.\n    # The `ca` is the root certificate authority of the PKI.\n    ca:\n        crt: LS0tIEVYQU1QTEUgQ0VSVElGSUNBVEUgLS0t\n        key: LS0tIEVYQU1QTEUgS0VZIC0tLQ==\n    # Extra arguments to supply to etcd.\n    extraArgs:\n        election-timeout: "5000"\n\n    # # The `advertisedSubnets` field configures the networks to pick etcd advertised IP from.\n    # advertisedSubnets:\n    #     - 10.0.0.0/8`</Accordion> | |
|`coreDNS` |<a href="#Config.cluster.coreDNS">CoreDNS</a> |Core DNS specific configuration options. <Accordion title="Show example(s)">`coreDNS:\n    image: registry.k8s.io/coredns/coredns:v1.12.3 # The `image` field is an override to the default coredns image.`</Accordion> | |
|`externalCloudProvider` |<a href="#Config.cluster.externalCloudProvider">ExternalCloudProviderConfig</a> |External cloud provider configuration. <Accordion title="Show example(s)">`externalCloudProvider:\n    enabled: true # Enable external cloud provider.\n    # A list of urls that point to additional manifests for an external cloud provider.\n    manifests:\n        - https://raw.githubusercontent.com/kubernetes/cloud-provider-aws/v1.20.0-alpha.0/manifests/rbac.yaml\n        - https://raw.githubusercontent.com/kubernetes/cloud-provider-aws/v1.20.0-alpha.0/manifests/aws-cloud-controller-manager-daemonset.yaml`</Accordion> | |
|`extraManifests` |[]string |A list of urls that point to additional manifests.<br />These will get automatically deployed as part of the bootstrap. <Accordion title="Show example(s)">`extraManifests:\n    - https://www.example.com/manifest1.yaml\n    - https://www.example.com/manifest2.yaml`</Accordion> | |
|`extraManifestHeaders` |map[string]string |A map of key value pairs that will be added while fetching the extraManifests. <Accordion title="Show example(s)">`extraManifestHeaders:\n    Token: "1234567"\n    X-ExtraInfo: info`</Accordion> | |
|`inlineManifests` |<a href="#Config.cluster.inlineManifests.">[]ClusterInlineManifest</a> |A list of inline Kubernetes manifests.<br />These will get automatically deployed as part of the bootstrap. <Accordion title="Show example(s)">`inlineManifests:\n    - name: namespace-ci # Name of the manifest.\n      contents: \|- # Manifest contents as a string.\n        apiVersion: v1\n        kind: Namespace\n        metadata:\n        	name: ci`</Accordion> | |
|`adminKubeconfig` |<a href="#Config.cluster.adminKubeconfig">AdminKubeconfigConfig</a> |Settings for admin kubeconfig generation.<br />Certificate lifetime can be configured. <Accordion title="Show example(s)">`adminKubeconfig:\n    certLifetime: 1h0m0s # Admin kubeconfig certificate lifetime (default is 1 year).`</Accordion> | |
|`allowSchedulingOnControlPlanes` |bool |Allows running workload on control-plane nodes. <Accordion title="Show example(s)">`allowSchedulingOnControlPlanes: true`</Accordion> |`true`<br />`yes`<br />`false`<br />`no`<br /> |




### controlPlane

ControlPlaneConfig represents the control plane configuration options.



```yaml
cluster:
    controlPlane:
        endpoint: https://1.2.3.4 # Endpoint is the canonical controlplane endpoint, which can be an IP address or a DNS hostname.
        localAPIServerPort: 443 # The port that the API server listens on internally.
```


| Field | Type | Description | Value(s) |
|-------|------|-------------|----------|
|`endpoint` |<a href="#Config.cluster.controlPlane.endpoint">Endpoint</a> |Endpoint is the canonical controlplane endpoint, which can be an IP address or a DNS hostname.<br />It is single-valued, and may optionally include a port number. <Accordion title="Show example(s)">`endpoint: https://1.2.3.4:6443`<br />`endpoint: https://cluster1.internal:6443`</Accordion> | |
|`localAPIServerPort` |int |The port that the API server listens on internally.<br />This may be different than the port portion listed in the endpoint field above.<br />The default is `6443`.  | |




#### endpoint

Endpoint represents the endpoint URL parsed out of the machine config.



```yaml
cluster:
    controlPlane:
        endpoint: https://1.2.3.4:6443
```

```yaml
cluster:
    controlPlane:
        endpoint: https://cluster1.internal:6443
```

```yaml
cluster:
    controlPlane:
        endpoint: udp://127.0.0.1:12345
```

```yaml
cluster:
    controlPlane:
        endpoint: tcp://1.2.3.4:12345
```


| Field | Type | Description | Value(s) |
|-------|------|-------------|----------|








### network

ClusterNetworkConfig represents kube networking configuration options.



```yaml
cluster:
    network:
        # The CNI used.
        cni:
            name: flannel # Name of CNI to use.
        dnsDomain: cluster.local # The domain used by Kubernetes DNS.
        # The pod subnet CIDR.
        podSubnets:
            - 10.244.0.0/16
        # The service subnet CIDR.
        serviceSubnets:
            - 10.96.0.0/12
```


| Field | Type | Description | Value(s) |
|-------|------|-------------|----------|
|`cni` |<a href="#Config.cluster.network.cni">CNIConfig</a> |The CNI used.<br />Composed of "name" and "urls".<br />The "name" key supports the following options: "flannel", "custom", and "none".<br />"flannel" uses Talos-managed Flannel CNI, and that's the default option.<br />"custom" uses custom manifests that should be provided in "urls".<br />"none" indicates that Talos will not manage any CNI installation. <Accordion title="Show example(s)">`cni:\n    name: custom # Name of CNI to use.\n    # URLs containing manifests to apply for the CNI.\n    urls:\n        - https://docs.projectcalico.org/archive/v3.20/manifests/canal.yaml`</Accordion> | |
|`dnsDomain` |string |The domain used by Kubernetes DNS.<br />The default is `cluster.local` <Accordion title="Show example(s)">`dnsDomain: cluster.local`</Accordion> | |
|`podSubnets` |[]string |The pod subnet CIDR. <Accordion title="Show example(s)">`podSubnets:\n    - 10.244.0.0/16`</Accordion> | |
|`serviceSubnets` |[]string |The service subnet CIDR. <Accordion title="Show example(s)">`serviceSubnets:\n    - 10.96.0.0/12`</Accordion> | |




#### cni

CNIConfig represents the CNI configuration options.



```yaml
cluster:
    network:
        cni:
            name: custom # Name of CNI to use.
            # URLs containing manifests to apply for the CNI.
            urls:
                - https://docs.projectcalico.org/archive/v3.20/manifests/canal.yaml
```


| Field | Type | Description | Value(s) |
|-------|------|-------------|----------|
|`name` |string |Name of CNI to use.  |`flannel`<br />`custom`<br />`none`<br /> |
|`urls` |[]string |URLs containing manifests to apply for the CNI.<br />Should be present for "custom", must be empty for "flannel" and "none".  | |
|`flannel` |<a href="#Config.cluster.network.cni.flannel">FlannelCNIConfig</a> |description: |<br />Flannel configuration options.<br />  | |




##### flannel

FlannelCNIConfig represents the Flannel CNI configuration options.




| Field | Type | Description | Value(s) |
|-------|------|-------------|----------|
|`extraArgs` |[]string |Extra arguments for 'flanneld'. <Accordion title="Show example(s)">`extraArgs:\n    - --iface-can-reach=192.168.1.1`</Accordion> | |










### apiServer

APIServerConfig represents the kube apiserver configuration options.



```yaml
cluster:
    apiServer:
        image: registry.k8s.io/kube-apiserver:v1.34.1 # The container image used in the API server manifest.
        # Extra arguments to supply to the API server.
        extraArgs:
            feature-gates: ServerSideApply=true
            http2-max-streams-per-connection: "32"
        # Extra certificate subject alternative names for the API server's certificate.
        certSANs:
            - 1.2.3.4
            - 4.5.6.7

        # # Configure the API server admission plugins.
        # admissionControl:
        #     - name: PodSecurity # Name is the name of the admission controller.
        #       # Configuration is an embedded configuration object to be used as the plugin's
        #       configuration:
        #         apiVersion: pod-security.admission.config.k8s.io/v1alpha1
        #         defaults:
        #             audit: restricted
        #             audit-version: latest
        #             enforce: baseline
        #             enforce-version: latest
        #             warn: restricted
        #             warn-version: latest
        #         exemptions:
        #             namespaces:
        #                 - kube-system
        #             runtimeClasses: []
        #             usernames: []
        #         kind: PodSecurityConfiguration

        # # Configure the API server audit policy.
        # auditPolicy:
        #     apiVersion: audit.k8s.io/v1
        #     kind: Policy
        #     rules:
        #         - level: Metadata

        # # Configure the API server authorization config. Node and RBAC authorizers are always added irrespective of the configuration.
        # authorizationConfig:
        #     - type: Webhook # Type is the name of the authorizer. Allowed values are `Node`, `RBAC`, and `Webhook`.
        #       name: webhook # Name is used to describe the authorizer.
        #       # webhook is the configuration for the webhook authorizer.
        #       webhook:
        #         connectionInfo:
        #             type: InClusterConfig
        #         failurePolicy: Deny
        #         matchConditionSubjectAccessReviewVersion: v1
        #         matchConditions:
        #             - expression: has(request.resourceAttributes)
        #             - expression: '!(\''system:serviceaccounts:kube-system\'' in request.groups)'
        #         subjectAccessReviewVersion: v1
        #         timeout: 3s
        #     - type: Webhook # Type is the name of the authorizer. Allowed values are `Node`, `RBAC`, and `Webhook`.
        #       name: in-cluster-authorizer # Name is used to describe the authorizer.
        #       # webhook is the configuration for the webhook authorizer.
        #       webhook:
        #         connectionInfo:
        #             type: InClusterConfig
        #         failurePolicy: NoOpinion
        #         matchConditionSubjectAccessReviewVersion: v1
        #         subjectAccessReviewVersion: v1
        #         timeout: 3s
```


| Field | Type | Description | Value(s) |
|-------|------|-------------|----------|
|`image` |string |The container image used in the API server manifest. <Accordion title="Show example(s)">`image: registry.k8s.io/kube-apiserver:v1.34.1`</Accordion> | |
|`extraArgs` |map[string]string |Extra arguments to supply to the API server.  | |
|`extraVolumes` |<a href="#Config.cluster.apiServer.extraVolumes.">[]VolumeMountConfig</a> |Extra volumes to mount to the API server static pod.  | |
|`env` |Env |The `env` field allows for the addition of environment variables for the control plane component.  | |
|`certSANs` |[]string |Extra certificate subject alternative names for the API server's certificate.  | |
|`disablePodSecurityPolicy` |bool |Disable PodSecurityPolicy in the API server and default manifests.  | |
|`admissionControl` |<a href="#Config.cluster.apiServer.admissionControl.">[]AdmissionPluginConfig</a> |Configure the API server admission plugins. <Accordion title="Show example(s)">`admissionControl:\n    - name: PodSecurity # Name is the name of the admission controller.\n      # Configuration is an embedded configuration object to be used as the plugin's\n      configuration:\n        apiVersion: pod-security.admission.config.k8s.io/v1alpha1\n        defaults:\n            audit: restricted\n            audit-version: latest\n            enforce: baseline\n            enforce-version: latest\n            warn: restricted\n            warn-version: latest\n        exemptions:\n            namespaces:\n                - kube-system\n            runtimeClasses: []\n            usernames: []\n        kind: PodSecurityConfiguration`</Accordion> | |
|`auditPolicy` |Unstructured |Configure the API server audit policy. <Accordion title="Show example(s)">`auditPolicy:\n    apiVersion: audit.k8s.io/v1\n    kind: Policy\n    rules:\n        - level: Metadata`</Accordion> | |
|`resources` |<a href="#Config.cluster.apiServer.resources">ResourcesConfig</a> |Configure the API server resources.  | |
|`authorizationConfig` |<a href="#Config.cluster.apiServer.authorizationConfig.">[]AuthorizationConfigAuthorizerConfig</a> |Configure the API server authorization config. Node and RBAC authorizers are always added irrespective of the configuration. <Accordion title="Show example(s)">`authorizationConfig:\n    - type: Webhook # Type is the name of the authorizer. Allowed values are `Node`, `RBAC`, and `Webhook`.\n      name: webhook # Name is used to describe the authorizer.\n      # webhook is the configuration for the webhook authorizer.\n      webhook:\n        connectionInfo:\n            type: InClusterConfig\n        failurePolicy: Deny\n        matchConditionSubjectAccessReviewVersion: v1\n        matchConditions:\n            - expression: has(request.resourceAttributes)\n            - expression: '!(\''system:serviceaccounts:kube-system\'' in request.groups)'\n        subjectAccessReviewVersion: v1\n        timeout: 3s\n    - type: Webhook # Type is the name of the authorizer. Allowed values are `Node`, `RBAC`, and `Webhook`.\n      name: in-cluster-authorizer # Name is used to describe the authorizer.\n      # webhook is the configuration for the webhook authorizer.\n      webhook:\n        connectionInfo:\n            type: InClusterConfig\n        failurePolicy: NoOpinion\n        matchConditionSubjectAccessReviewVersion: v1\n        subjectAccessReviewVersion: v1\n        timeout: 3s`</Accordion> | |




#### extraVolumes[]

VolumeMountConfig struct describes extra volume mount for the static pods.




| Field | Type | Description | Value(s) |
|-------|------|-------------|----------|
|`hostPath` |string |Path on the host. <Accordion title="Show example(s)">`hostPath: /var/lib/auth`</Accordion> | |
|`mountPath` |string |Path in the container. <Accordion title="Show example(s)">`mountPath: /etc/kubernetes/auth`</Accordion> | |
|`readonly` |bool |Mount the volume read only. <Accordion title="Show example(s)">`readonly: true`</Accordion> | |






#### admissionControl[]

AdmissionPluginConfig represents the API server admission plugin configuration.



```yaml
cluster:
    apiServer:
        admissionControl:
            - name: PodSecurity # Name is the name of the admission controller.
              # Configuration is an embedded configuration object to be used as the plugin's
              configuration:
                apiVersion: pod-security.admission.config.k8s.io/v1alpha1
                defaults:
                    audit: restricted
                    audit-version: latest
                    enforce: baseline
                    enforce-version: latest
                    warn: restricted
                    warn-version: latest
                exemptions:
                    namespaces:
                        - kube-system
                    runtimeClasses: []
                    usernames: []
                kind: PodSecurityConfiguration
```


| Field | Type | Description | Value(s) |
|-------|------|-------------|----------|
|`name` |string |Name is the name of the admission controller.<br />It must match the registered admission plugin name.  | |
|`configuration` |Unstructured |Configuration is an embedded configuration object to be used as the plugin's<br />configuration.  | |






#### resources

ResourcesConfig represents the pod resources.




| Field | Type | Description | Value(s) |
|-------|------|-------------|----------|
|`requests` |Unstructured |Requests configures the reserved cpu/memory resources. <Accordion title="Show example(s)">`requests:\n    cpu: 1\n    memory: 1Gi`</Accordion> | |
|`limits` |Unstructured |Limits configures the maximum cpu/memory resources a container can use. <Accordion title="Show example(s)">`limits:\n    cpu: 2\n    memory: 2500Mi`</Accordion> | |






#### authorizationConfig[]

AuthorizationConfigAuthorizerConfig represents the API server authorization config authorizer configuration.



```yaml
cluster:
    apiServer:
        authorizationConfig:
            - type: Webhook # Type is the name of the authorizer. Allowed values are `Node`, `RBAC`, and `Webhook`.
              name: webhook # Name is used to describe the authorizer.
              # webhook is the configuration for the webhook authorizer.
              webhook:
                connectionInfo:
                    type: InClusterConfig
                failurePolicy: Deny
                matchConditionSubjectAccessReviewVersion: v1
                matchConditions:
                    - expression: has(request.resourceAttributes)
                    - expression: '!(\''system:serviceaccounts:kube-system\'' in request.groups)'
                subjectAccessReviewVersion: v1
                timeout: 3s
            - type: Webhook # Type is the name of the authorizer. Allowed values are `Node`, `RBAC`, and `Webhook`.
              name: in-cluster-authorizer # Name is used to describe the authorizer.
              # webhook is the configuration for the webhook authorizer.
              webhook:
                connectionInfo:
                    type: InClusterConfig
                failurePolicy: NoOpinion
                matchConditionSubjectAccessReviewVersion: v1
                subjectAccessReviewVersion: v1
                timeout: 3s
```


| Field | Type | Description | Value(s) |
|-------|------|-------------|----------|
|`type` |string |Type is the name of the authorizer. Allowed values are `Node`, `RBAC`, and `Webhook`.  | |
|`name` |string |Name is used to describe the authorizer.  | |
|`webhook` |Unstructured |webhook is the configuration for the webhook authorizer.  | |








### controllerManager

ControllerManagerConfig represents the kube controller manager configuration options.



```yaml
cluster:
    controllerManager:
        image: registry.k8s.io/kube-controller-manager:v1.34.1 # The container image used in the controller manager manifest.
        # Extra arguments to supply to the controller manager.
        extraArgs:
            feature-gates: ServerSideApply=true
```


| Field | Type | Description | Value(s) |
|-------|------|-------------|----------|
|`image` |string |The container image used in the controller manager manifest. <Accordion title="Show example(s)">`image: registry.k8s.io/kube-controller-manager:v1.34.1`</Accordion> | |
|`extraArgs` |map[string]string |Extra arguments to supply to the controller manager.  | |
|`extraVolumes` |<a href="#Config.cluster.controllerManager.extraVolumes.">[]VolumeMountConfig</a> |Extra volumes to mount to the controller manager static pod.  | |
|`env` |Env |The `env` field allows for the addition of environment variables for the control plane component.  | |
|`resources` |<a href="#Config.cluster.controllerManager.resources">ResourcesConfig</a> |Configure the controller manager resources.  | |




#### extraVolumes[]

VolumeMountConfig struct describes extra volume mount for the static pods.




| Field | Type | Description | Value(s) |
|-------|------|-------------|----------|
|`hostPath` |string |Path on the host. <Accordion title="Show example(s)">`hostPath: /var/lib/auth`</Accordion> | |
|`mountPath` |string |Path in the container. <Accordion title="Show example(s)">`mountPath: /etc/kubernetes/auth`</Accordion> | |
|`readonly` |bool |Mount the volume read only. <Accordion title="Show example(s)">`readonly: true`</Accordion> | |






#### resources

ResourcesConfig represents the pod resources.




| Field | Type | Description | Value(s) |
|-------|------|-------------|----------|
|`requests` |Unstructured |Requests configures the reserved cpu/memory resources. <Accordion title="Show example(s)">`requests:\n    cpu: 1\n    memory: 1Gi`</Accordion> | |
|`limits` |Unstructured |Limits configures the maximum cpu/memory resources a container can use. <Accordion title="Show example(s)">`limits:\n    cpu: 2\n    memory: 2500Mi`</Accordion> | |








### proxy

ProxyConfig represents the kube proxy configuration options.



```yaml
cluster:
    proxy:
        image: registry.k8s.io/kube-proxy:v1.34.1 # The container image used in the kube-proxy manifest.
        mode: ipvs # proxy mode of kube-proxy.
        # Extra arguments to supply to kube-proxy.
        extraArgs:
            proxy-mode: iptables

        # # Disable kube-proxy deployment on cluster bootstrap.
        # disabled: false
```


| Field | Type | Description | Value(s) |
|-------|------|-------------|----------|
|`disabled` |bool |Disable kube-proxy deployment on cluster bootstrap. <Accordion title="Show example(s)">`disabled: false`</Accordion> | |
|`image` |string |The container image used in the kube-proxy manifest. <Accordion title="Show example(s)">`image: registry.k8s.io/kube-proxy:v1.34.1`</Accordion> | |
|`mode` |string |proxy mode of kube-proxy.<br />The default is 'iptables'.  | |
|`extraArgs` |map[string]string |Extra arguments to supply to kube-proxy.  | |






### scheduler

SchedulerConfig represents the kube scheduler configuration options.



```yaml
cluster:
    scheduler:
        image: registry.k8s.io/kube-scheduler:v1.34.1 # The container image used in the scheduler manifest.
        # Extra arguments to supply to the scheduler.
        extraArgs:
            feature-gates: AllBeta=true
```


| Field | Type | Description | Value(s) |
|-------|------|-------------|----------|
|`image` |string |The container image used in the scheduler manifest. <Accordion title="Show example(s)">`image: registry.k8s.io/kube-scheduler:v1.34.1`</Accordion> | |
|`extraArgs` |map[string]string |Extra arguments to supply to the scheduler.  | |
|`extraVolumes` |<a href="#Config.cluster.scheduler.extraVolumes.">[]VolumeMountConfig</a> |Extra volumes to mount to the scheduler static pod.  | |
|`env` |Env |The `env` field allows for the addition of environment variables for the control plane component.  | |
|`resources` |<a href="#Config.cluster.scheduler.resources">ResourcesConfig</a> |Configure the scheduler resources.  | |
|`config` |Unstructured |Specify custom kube-scheduler configuration.  | |




#### extraVolumes[]

VolumeMountConfig struct describes extra volume mount for the static pods.




| Field | Type | Description | Value(s) |
|-------|------|-------------|----------|
|`hostPath` |string |Path on the host. <Accordion title="Show example(s)">`hostPath: /var/lib/auth`</Accordion> | |
|`mountPath` |string |Path in the container. <Accordion title="Show example(s)">`mountPath: /etc/kubernetes/auth`</Accordion> | |
|`readonly` |bool |Mount the volume read only. <Accordion title="Show example(s)">`readonly: true`</Accordion> | |






#### resources

ResourcesConfig represents the pod resources.




| Field | Type | Description | Value(s) |
|-------|------|-------------|----------|
|`requests` |Unstructured |Requests configures the reserved cpu/memory resources. <Accordion title="Show example(s)">`requests:\n    cpu: 1\n    memory: 1Gi`</Accordion> | |
|`limits` |Unstructured |Limits configures the maximum cpu/memory resources a container can use. <Accordion title="Show example(s)">`limits:\n    cpu: 2\n    memory: 2500Mi`</Accordion> | |








### discovery

ClusterDiscoveryConfig struct configures cluster membership discovery.



```yaml
cluster:
    discovery:
        enabled: true # Enable the cluster membership discovery feature.
        # Configure registries used for cluster member discovery.
        registries:
            # Kubernetes registry uses Kubernetes API server to discover cluster members and stores additional information
            kubernetes: {}
            # Service registry is using an external service to push and pull information about cluster members.
            service:
                endpoint: https://discovery.talos.dev/ # External service endpoint.
```


| Field | Type | Description | Value(s) |
|-------|------|-------------|----------|
|`enabled` |bool |Enable the cluster membership discovery feature.<br />Cluster discovery is based on individual registries which are configured under the registries field.  | |
|`registries` |<a href="#Config.cluster.discovery.registries">DiscoveryRegistriesConfig</a> |Configure registries used for cluster member discovery.  | |




#### registries

DiscoveryRegistriesConfig struct configures cluster membership discovery.




| Field | Type | Description | Value(s) |
|-------|------|-------------|----------|
|`kubernetes` |<a href="#Config.cluster.discovery.registries.kubernetes">RegistryKubernetesConfig</a> |Kubernetes registry uses Kubernetes API server to discover cluster members and stores additional information<br />as annotations on the Node resources.<br /><br />This feature is deprecated as it is not compatible with Kubernetes 1.32+.<br />See https://github.com/siderolabs/talos/issues/9980 for more information.  | |
|`service` |<a href="#Config.cluster.discovery.registries.service">RegistryServiceConfig</a> |Service registry is using an external service to push and pull information about cluster members.  | |




##### kubernetes

RegistryKubernetesConfig struct configures Kubernetes discovery registry.




| Field | Type | Description | Value(s) |
|-------|------|-------------|----------|
|`disabled` |bool |Disable Kubernetes discovery registry.  | |






##### service

RegistryServiceConfig struct configures Kubernetes discovery registry.




| Field | Type | Description | Value(s) |
|-------|------|-------------|----------|
|`disabled` |bool |Disable external service discovery registry.  | |
|`endpoint` |string |External service endpoint. <Accordion title="Show example(s)">`endpoint: https://discovery.talos.dev/`</Accordion> | |










### etcd

EtcdConfig represents the etcd configuration options.



```yaml
cluster:
    etcd:
        image: gcr.io/etcd-development/etcd:v3.6.4 # The container image used to create the etcd service.
        # The `ca` is the root certificate authority of the PKI.
        ca:
            crt: LS0tIEVYQU1QTEUgQ0VSVElGSUNBVEUgLS0t
            key: LS0tIEVYQU1QTEUgS0VZIC0tLQ==
        # Extra arguments to supply to etcd.
        extraArgs:
            election-timeout: "5000"

        # # The `advertisedSubnets` field configures the networks to pick etcd advertised IP from.
        # advertisedSubnets:
        #     - 10.0.0.0/8
```


| Field | Type | Description | Value(s) |
|-------|------|-------------|----------|
|`image` |string |The container image used to create the etcd service. <Accordion title="Show example(s)">`image: gcr.io/etcd-development/etcd:v3.6.4`</Accordion> | |
|`ca` |PEMEncodedCertificateAndKey |The `ca` is the root certificate authority of the PKI.<br />It is composed of a base64 encoded `crt` and `key`. <Accordion title="Show example(s)">`ca:\n    crt: LS0tIEVYQU1QTEUgQ0VSVElGSUNBVEUgLS0t\n    key: LS0tIEVYQU1QTEUgS0VZIC0tLQ==`</Accordion> | |
|`extraArgs` |map[string]string |Extra arguments to supply to etcd.<br />Note that the following args are not allowed:<br /><br />- `name`<br />- `data-dir`<br />- `initial-cluster-state`<br />- `listen-peer-urls`<br />- `listen-client-urls`<br />- `cert-file`<br />- `key-file`<br />- `trusted-ca-file`<br />- `peer-client-cert-auth`<br />- `peer-cert-file`<br />- `peer-trusted-ca-file`<br />- `peer-key-file`  | |
|`advertisedSubnets` |[]string |The `advertisedSubnets` field configures the networks to pick etcd advertised IP from.<br /><br />IPs can be excluded from the list by using negative match with `!`, e.g `!10.0.0.0/8`.<br />Negative subnet matches should be specified last to filter out IPs picked by positive matches.<br />If not specified, advertised IP is selected as the first routable address of the node. <Accordion title="Show example(s)">`advertisedSubnets:\n    - 10.0.0.0/8`</Accordion> | |
|`listenSubnets` |[]string |The `listenSubnets` field configures the networks for the etcd to listen for peer and client connections.<br /><br />If `listenSubnets` is not set, but `advertisedSubnets` is set, `listenSubnets` defaults to<br />`advertisedSubnets`.<br /><br />If neither `advertisedSubnets` nor `listenSubnets` is set, `listenSubnets` defaults to listen on all addresses.<br /><br />IPs can be excluded from the list by using negative match with `!`, e.g `!10.0.0.0/8`.<br />Negative subnet matches should be specified last to filter out IPs picked by positive matches.<br />If not specified, advertised IP is selected as the first routable address of the node.  | |






### coreDNS

CoreDNS represents the CoreDNS config values.



```yaml
cluster:
    coreDNS:
        image: registry.k8s.io/coredns/coredns:v1.12.3 # The `image` field is an override to the default coredns image.
```


| Field | Type | Description | Value(s) |
|-------|------|-------------|----------|
|`disabled` |bool |Disable coredns deployment on cluster bootstrap.  | |
|`image` |string |The `image` field is an override to the default coredns image.  | |






### externalCloudProvider

ExternalCloudProviderConfig contains external cloud provider configuration.



```yaml
cluster:
    externalCloudProvider:
        enabled: true # Enable external cloud provider.
        # A list of urls that point to additional manifests for an external cloud provider.
        manifests:
            - https://raw.githubusercontent.com/kubernetes/cloud-provider-aws/v1.20.0-alpha.0/manifests/rbac.yaml
            - https://raw.githubusercontent.com/kubernetes/cloud-provider-aws/v1.20.0-alpha.0/manifests/aws-cloud-controller-manager-daemonset.yaml
```


| Field | Type | Description | Value(s) |
|-------|------|-------------|----------|
|`enabled` |bool |Enable external cloud provider.  |`true`<br />`yes`<br />`false`<br />`no`<br /> |
|`manifests` |[]string |A list of urls that point to additional manifests for an external cloud provider.<br />These will get automatically deployed as part of the bootstrap. <Accordion title="Show example(s)">`manifests:\n    - https://raw.githubusercontent.com/kubernetes/cloud-provider-aws/v1.20.0-alpha.0/manifests/rbac.yaml\n    - https://raw.githubusercontent.com/kubernetes/cloud-provider-aws/v1.20.0-alpha.0/manifests/aws-cloud-controller-manager-daemonset.yaml`</Accordion> | |






### inlineManifests[]

ClusterInlineManifest struct describes inline bootstrap manifests for the user.



```yaml
cluster:
    inlineManifests:
        - name: namespace-ci # Name of the manifest.
          contents: |- # Manifest contents as a string.
            apiVersion: v1
            kind: Namespace
            metadata:
            	name: ci
```


| Field | Type | Description | Value(s) |
|-------|------|-------------|----------|
|`name` |string |Name of the manifest.<br />Name should be unique. <Accordion title="Show example(s)">`name: csi`</Accordion> | |
|`contents` |string |Manifest contents as a string. <Accordion title="Show example(s)">`contents: /etc/kubernetes/auth`</Accordion> | |






### adminKubeconfig

AdminKubeconfigConfig contains admin kubeconfig settings.



```yaml
cluster:
    adminKubeconfig:
        certLifetime: 1h0m0s # Admin kubeconfig certificate lifetime (default is 1 year).
```


| Field | Type | Description | Value(s) |
|-------|------|-------------|----------|
|`certLifetime` |Duration |Admin kubeconfig certificate lifetime (default is 1 year).<br />Field format accepts any Go time.Duration format ('1h' for one hour, '10m' for ten minutes).  | |










